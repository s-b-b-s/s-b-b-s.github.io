{"componentChunkName":"component---src-templates-blog-template-js","path":"/4-aws-2/","result":{"data":{"cur":{"id":"20307add-8563-58bc-b015-e35cd84456a2","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>awsclië¥¼ Roles Anywhereë¥¼ í†µí•´ì„œ ì ‘ì† í•´ë³´ìğŸ™Œ</p>\n<ul>\n<li>1 RootCA ì¸ì¦ì„œ ë§Œë“¤ê¸° (CA Bundle ì¸ì¦ì„œ) - <strong>1í¸</strong></li>\n<li>2 SSL ì¸ì¦ì„œ ë§Œë“¤ê¸° (RootCAë¡œ ì„œëª…í•œ awsì ‘ì†ìš© ì¸ì¦ì„œ) - <strong>1í¸</strong></li>\n<li>3 CA Bundle ë“±ë¡(trust-anchor) - <strong>2í¸</strong></li>\n<li>4 role ìƒì„± - <strong>2í¸</strong></li>\n<li>5 profile ìƒì„± - <strong>2í¸</strong></li>\n<li>6 aws_credential_helperë¡œ credentials ìƒì„± - <strong>2í¸</strong></li>\n<li>7 aws cli ì„¤ì¹˜ ë° ëª…ë ¹ì–´ ì‚¬ìš© í•´ë³´ê¸° - <strong>2í¸</strong></li>\n<li>8 EC2ì— SSM Agent ì„¤ì¹˜ - <strong>3í¸</strong></li>\n<li>9 PCì— SSM plugin ì„¤ì¹˜í›„ aws clië¡œ EC2ì ‘ì† - <strong>3í¸</strong></li>\n</ul>\n<hr>\n<h3 id=\"ï¸-3-ca-bundle-ë“±ë¡trust-anchor\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-ca-bundle-%EB%93%B1%EB%A1%9Dtrust-anchor\" aria-label=\"ï¸ 3 ca bundle ë“±ë¡trust anchor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 3. CA Bundle ë“±ë¡(trust-anchor)</h3>\n<p>AWS -> ì„œë¹„ìŠ¤ ê²€ìƒ‰ -> Roles Anywhere -> íŠ¸ëŸ¬ìŠ¤íŠ¸ ì•µì»¤ ìƒì„± <br></p>\n<blockquote>\n<p>ì•µì»¤ì´ë¦„ : test <br>\nCertificate authority(CA) ì†ŒìŠ¤ : ì™¸ë¶€ ì¸ì¦ì„œ ë²ˆë“¤ <br>\nì™¸ë¶€ ì¸ì¦ì„œ ë²ˆë“¤ì—ëŠ” 1í¸ì—ì„œ ë§Œë“  lesstif-rootca.pem íŒŒì¼ ë‚´ìš© ë³µì‚¬ <br>\ntest íŠ¸ëŸ¬ìŠ¤íŠ¸ ì•µì»¤ì˜ ì„¸ë¶€ì •ë³´ì— <code class=\"language-text\">íŠ¸ëŸ¬ìŠ¤íŠ¸ ì•µì»¤ ARN</code> ë‚´ìš© ë³µì‚¬í•´ë‘ê¸° <br>\nex ) arn:aws:rolesanywhere:ap-northeast-2:testt123:trust-anchor/64438eff-ea71-449 <br></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.55555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACqElEQVQ4y5VUCZKjMAzk/x+b2t3cmdwnIZkQEobTxmCb3pJImOw966ouWTJuW1JjJ80yXIIAZ99HmqYoigJSyg+Q/wnQvlwIOFmew/cvOB5PEEKgrmsYYxjWGGitoauqsX9AdV8nYifPcxCpsRZlVUHKAoVSUKqEkJI/pkP+BlvXoKHKEg5d8+3tDM/zIPIciskUyrLklI3W+Oygw51cSARhDD8IkeQShhYsUJq6tUrbf8PUEIWCk2QCy2OAIJG4xALnKIcf5Yhk9Z/QiPICDtXpcg1xuYU4B1dcbu+QqoSpgcrYFsbWHKMMtK1/WCNQjMrkUAPiOOZOn89n+L6PMAyRZSmM0bC26fYxKbG/pnAv7/ATibisESn7gbJGKhUcedddnCRI0pSlQ11/dLiqNCrdpBVmEmEqEAuFvDTIlG5BviDZkJj3rovNZovDwYO1ttUWpfCArkpoXTXgg8pGn/e5YR3K5oYkYroZaZL+nKJQsLVlfT1rjQ4jS5qt7ocytGYNCkGEUsJ1D1gsV5jNF5jPF1guV3APBxxPJ+z3Lq/Tn3Q6veHgeQiCK2dBo76LmsiobA5NJtMZ+oMhev0BBmR7fXQ6PY51u310uj1863TR7fYwGo35OyrDMyFdLCFCmlD9xuNXJh4OR0xK8+l0htlsziRETpb818mUU/0tIb0S1AxKd7Vac7q73R7b7Y7LsFpvsNnuOEbprtcbnv+asmhSpqZ4xyOWqzVvpA3uwWtJt/fYbr/HZrttyX++IflZljWEJBu62WKxxHQ2Z/LnJk0mU14nkE/x5xo+QNplQiJ6efmCXm+Afn+A8XjClppDtf36rcPNGQxHGI7GGL9O2pQfoyWk5yuKY9zCkHG93RC+RxwjS3VhP4oRxwlbWnu80o1V/I7mucB31lymdQGbh8AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ì‚¬ì§„1\"\n        title=\"ì‚¬ì§„1\"\n        src=\"/static/83d01e369e8c149896c2b3cb3566befd/37523/1.png\"\n        srcset=\"/static/83d01e369e8c149896c2b3cb3566befd/e9ff0/1.png 180w,\n/static/83d01e369e8c149896c2b3cb3566befd/f21e7/1.png 360w,\n/static/83d01e369e8c149896c2b3cb3566befd/37523/1.png 720w,\n/static/83d01e369e8c149896c2b3cb3566befd/5d72a/1.png 834w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"ï¸-4-role-ìƒì„±\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-4-role-%EC%83%9D%EC%84%B1\" aria-label=\"ï¸ 4 role ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 4. role ìƒì„±</h3>\n<p>AWS -> ì„œë¹„ìŠ¤ ê²€ìƒ‰ -> Roles Anywhere -> ì„¤ì • ë‹¨ê³„ -> ì—­í•  êµ¬ì„± -> ìƒˆ ì—­í•  ìƒì„±  <br></p>\n<blockquote>\n<p>ì‹ ë¢°í• ìˆ˜ ìˆëŠ” ì—”í‹°í‹° ìœ í˜• : AWS ì„œë¹„ìŠ¤ <br>\në‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ì˜ ì‚¬ìš©ì‚¬ë¡€ : Roles Anywhere -> ë‹¤ìŒ<br>\nì‹ ë¢° í• ìˆ˜ ìˆëŠ” ì—”í‹°í‹° ì„ íƒ  ë‚´ìš©ì— ì•„ë˜ì™€ ê°™ì´ Condition ì¶”ê°€  <br>\nâ€œaws:SourceArnâ€ ì€ ìœ„ì— íŠ¸ëŸ¬ìŠ¤íŠ¸ ì•µì»¤ì˜ arn ë³µë¶™ <br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"Version\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2012-10-17\"</span>,\n    <span class=\"token string\">\"Statement\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Effect\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Allow\"</span>,\n            <span class=\"token string\">\"Principal\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"Service\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"rolesanywhere.amazonaws.com\"</span>\n            <span class=\"token punctuation\">}</span>,\n            <span class=\"token string\">\"Action\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"sts:AssumeRole\"</span>,\n                <span class=\"token string\">\"sts:SetSourceIdentity\"</span>,\n                <span class=\"token string\">\"sts:TagSession\"</span>\n            <span class=\"token punctuation\">]</span>,\n            <span class=\"token string\">\"Condition\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"ArnEquals\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"aws:SourceArn\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"arn:aws:rolesanywhere:ap-northeast-2:testtestte:trust-anchor/test-ea71-test-test-test\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ìƒì„± ì´í›„ <code class=\"language-text\">ë¡¤ì˜ ARN</code> ë³µë¶™ <br></p>\n</blockquote>\n<hr>\n<h3 id=\"ï¸-5-profile-ìƒì„±\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-5-profile-%EC%83%9D%EC%84%B1\" aria-label=\"ï¸ 5 profile ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 5. profile ìƒì„±</h3>\n<p>AWS -> ì„œë¹„ìŠ¤ ê²€ìƒ‰ -> Roles Anywhere -> í”„ë¡œíŒŒì¼ ìƒì„± <br></p>\n<blockquote>\n<p>í”„ë¡œíŒŒì¼ ì´ë¦„ : test <br>\nì—­í• ì€ 4ë²ˆì—ì„œ ë§Œë“  test ë¡œ ì„ íƒ <br>\në‚˜ë¨¸ì§€ëŠ” ìˆ˜ì •ì—†ì´ í”„ë¡œíŒŒì¼ ìƒì„± <br>\nìƒì„± ì´í›„ <code class=\"language-text\">í”„ë¡œíŒŒì¼ì˜ ARN</code> ë³µë¶™ <br></p>\n</blockquote>\n<hr>\n<h3 id=\"ï¸-6-aws_credential_helperë¡œ-credentials-ìƒì„±\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-6-aws_credential_helper%EB%A1%9C-credentials-%EC%83%9D%EC%84%B1\" aria-label=\"ï¸ 6 aws_credential_helperë¡œ credentials ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 6. aws_credential_helperë¡œ credentials ìƒì„±</h3>\n<blockquote>\n<p><a href=\"https://docs.aws.amazon.com/rolesanywhere/latest/userguide/credential-helper.html\">https://docs.aws.amazon.com/rolesanywhere/latest/userguide/credential-helper.html</a>\në³¸ì¸ì´ ì‚¬ìš©í•˜ëŠ” OS ë³„ë¡œ ë‹¤ìš´ë¡œë“œ\nì•„ë˜ì™€ ë‚´ìš© ë³µì‚¬í•´ì„œ ì³ë³´ê¸° (* ì¸ì¦ì„œì™€ í‚¤ ê²½ë¡œëŠ” full pathë¥¼ ì³ì•¼í•¨)</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 2,3ë²ˆ ë¼ì¸ì€ 2í¸ RootCAë¡œ ì„œëª…í•œ awsì ‘ì†ìš© crt,keyíŒŒì¼ ê²½ë¡œ</span>\n<span class=\"token comment\"># 4,5,6ë²ˆ ë¼ì¸ì€ ìœ„ì—ì„œ ë§Œë“  ARN 3ê°œ trust-anchor,profile,roleë¥¼ ë„£ê¸°  </span>\n\n./aws_signing_helper credential-process <span class=\"token punctuation\">\\</span>\n      <span class=\"token parameter variable\">--certificate</span> /path/to/certificate <span class=\"token punctuation\">\\</span> \n      --private-key /path/to/private-key <span class=\"token punctuation\">\\</span> \n      --trust-anchor-arn arn:aws:rolesanywhere:region:account:trust-anchor/TA_ID <span class=\"token punctuation\">\\</span>\n      --profile-arn arn:aws:rolesanywhere:region:account:profile/PROFILE_ID <span class=\"token punctuation\">\\</span>\n      --role-arn arn:aws:iam::account:role/role-name-with-path\n\n<span class=\"token comment\"># ì…ë ¥í•´ì„œ ì„±ê³µí•˜ë©´ ì•„ë˜ì²˜ëŸ¼ ë‚˜ì˜´ </span>\n<span class=\"token punctuation\">{</span><span class=\"token string\">\"Version\"</span>:1,<span class=\"token string\">\"AccessKeyId\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"ASIAXNQ~~~~~CYZL\"</span>,<span class=\"token string\">\"SecretAccessKey\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"N7LWW~~~~~~~igU6PR67dFylHSHoAt\"</span>,\n<span class=\"token string\">\"SessionToken\"</span>:\"IQoJb3JpZ2luX2VjEIf//////////wEaDmFwLW5vcnRoZWFzdC0yIkgwRgIhAOwy+O9Tz+x7FfztORGHC03BLE4E\n+vclwgP830gUmQt6AiEAtIq+vgzKNQhlC2o9bXsyWZuKqzbJoEXr4oKYP9qMrq8qvwMIwf//////////\nARADGgw1MTAwODczNjU2OTAiDI4vmdEDEQ/nThQwWSqTAxkMG2/\n4bhgxXPy73aQxj49fujBbx5FLZmp57Ufl461J0UCGgAIKo1m7nyKm8YQZ6vIcz3uG1BJFSKg78IABKkjzUbSkr2bM/zap\n+Ykk66R9SnoPao75j0t1fkShwoqqy8JAg20r7ikLRt3yLXXLLVP6UY~<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-7-aws-cli-ì„¤ì¹˜-ë°-ëª…ë ¹ì–´-ì‚¬ìš©-í•´ë³´ê¸°\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-7-aws-cli-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%82%AC%EC%9A%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"ï¸ 7 aws cli ì„¤ì¹˜ ë° ëª…ë ¹ì–´ ì‚¬ìš© í•´ë³´ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 7. aws cli ì„¤ì¹˜ ë° ëª…ë ¹ì–´ ì‚¬ìš© í•´ë³´ê¸°</h3>\n<blockquote>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/getting-started-install.html\">https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/getting-started-install.html</a>\në³¸ì¸ì—ê²Œ í•´ë‹¹ë˜ëŠ” OSë¡œ ì„¤ì¹˜\nMacOSëŠ” terminal ì—ì„œ aws ëª…ë ¹ì–´ ì³ëŸ¬ ì•„ë˜ì²˜ëŸ¼ ë‚˜ì˜¤ë©´ ì„±ê³µ</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">usage: aws <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>subcommand<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span>subcommand<span class=\"token operator\">></span> <span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>parameters<span class=\"token punctuation\">]</span>\nTo see <span class=\"token builtin class-name\">help</span> text, you can run:\n\n  aws <span class=\"token builtin class-name\">help</span>\n  aws <span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span> <span class=\"token builtin class-name\">help</span>\n  aws <span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>subcommand<span class=\"token operator\">></span> <span class=\"token builtin class-name\">help</span>\n\naws: error: the following arguments are required: <span class=\"token builtin class-name\">command</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-8-aws-clië¡œ-ec2-ì •ë³´-ê°€ì ¸ì™€ë³´ê¸°\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-8-aws-cli%EB%A1%9C-ec2-%EC%A0%95%EB%B3%B4-%EA%B0%80%EC%A0%B8%EC%99%80%EB%B3%B4%EA%B8%B0\" aria-label=\"ï¸ 8 aws clië¡œ ec2 ì •ë³´ ê°€ì ¸ì™€ë³´ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 8. aws clië¡œ ec2 ì •ë³´ ê°€ì ¸ì™€ë³´ê¸°</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws ec2 describe-instances</code></pre></div>\n<hr>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p>hhttps://docs.aws.amazon.com/rolesanywhere/latest/userguide/credential-helper.html<br>\n<a href=\"https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/getting-started-install.html\">https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/getting-started-install.html</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-3-ca-bundle-%EB%93%B1%EB%A1%9Dtrust-anchor\">âŒ¨ï¸ 3. CA Bundle ë“±ë¡(trust-anchor)</a></li>\n<li><a href=\"#%EF%B8%8F-4-role-%EC%83%9D%EC%84%B1\">âŒ¨ï¸ 4. role ìƒì„±</a></li>\n<li><a href=\"#%EF%B8%8F-5-profile-%EC%83%9D%EC%84%B1\">âŒ¨ï¸ 5. profile ìƒì„±</a></li>\n<li><a href=\"#%EF%B8%8F-6-aws_credential_helper%EB%A1%9C-credentials-%EC%83%9D%EC%84%B1\">âŒ¨ï¸ 6. aws_credential_helperë¡œ credentials ìƒì„±</a></li>\n<li><a href=\"#%EF%B8%8F-7-aws-cli-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%82%AC%EC%9A%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0\">âŒ¨ï¸ 7. aws cli ì„¤ì¹˜ ë° ëª…ë ¹ì–´ ì‚¬ìš© í•´ë³´ê¸°</a></li>\n<li><a href=\"#%EF%B8%8F-8-aws-cli%EB%A1%9C-ec2-%EC%A0%95%EB%B3%B4-%EA%B0%80%EC%A0%B8%EC%99%80%EB%B3%B4%EA%B8%B0\">âŒ¨ï¸ 8. aws clië¡œ ec2 ì •ë³´ ê°€ì ¸ì™€ë³´ê¸°</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ ì†Œê°œ awsclië¥¼ Roles Anywhereë¥¼ í†µí•´ì„œ ì ‘ì† í•´ë³´ìğŸ™Œ 1 RootCA ì¸ì¦ì„œ ë§Œë“¤ê¸° (CA Bundle ì¸ì¦ì„œ) - 1í¸ 2 SSL ì¸ì¦ì„œ ë§Œë“¤ê¸° (RootCAë¡œ ì„œëª…í•œ awsì ‘ì†ìš© ì¸ì¦ì„œ) - 1í¸ 3 CA Bundle ë“±ë¡(trust-anchor) - 2í¸ 4 role ìƒì„± - 2í¸ 5 profile ìƒì„± - 2í¸ 6 aws_credential_helperë¡œ credentials ìƒì„± - 2í¸ 7 aws cli ì„¤ì¹˜ ë° ëª…ë ¹ì–´ ì‚¬ìš© í•´ë³´ê¸° - 2í¸ 8 EC2ì— SSM Agent ì„¤ì¹˜ - 3í¸ 9 PCì— SSM plugin ì„¤ì¹˜í›„ aws clië¡œ EC2ì ‘ì† - 3í¸ âŒ¨ï¸ 3. CA Bundle ë“±ë¡(trust-anchor) AWS -> ì„œë¹„ìŠ¤ ê²€ìƒ‰ -> Roles Anywhere -> íŠ¸ëŸ¬ìŠ¤íŠ¸ ì•µì»¤ ìƒì„±  ì•µì»¤ì´ë¦„ : test \nCertificate authority(CA) ì†ŒìŠ¤ : ì™¸ë¶€ ì¸ì¦ì„œ ë²ˆë“¤ \nì™¸ë¶€ ì¸ì¦ì„œ ë²ˆë“¤ì—ëŠ” 1í¸ì—ì„œ ë§Œë“  lesstif-rootcâ€¦","frontmatter":{"date":"June 02, 2023","title":"[AWS] AWS CLI ì‚¬ìš©í•˜ê¸° - Roles Anywhere ì„¤ì •(2)","categories":"AWS","author":"sb","emoji":"â˜ï¸"},"fields":{"slug":"/4-aws-2/"}},"next":{"id":"cf95f328-5cc8-59aa-9874-2a50f90dec5a","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>awsclië¥¼ Roles Anywhereë¥¼ í†µí•´ì„œ ì ‘ì† í•´ë³´ìğŸ™Œ</p>\n<ul>\n<li>1 RootCA ì¸ì¦ì„œ ë§Œë“¤ê¸° (CA Bundle ì¸ì¦ì„œ) - <strong>1í¸</strong></li>\n<li>2 SSL ì¸ì¦ì„œ ë§Œë“¤ê¸° (RootCAë¡œ ì„œëª…í•œ awsì ‘ì†ìš© ì¸ì¦ì„œ) - <strong>1í¸</strong></li>\n<li>3 CA Bundle ë“±ë¡(trust-anchor) - <strong>2í¸</strong></li>\n<li>4 role ìƒì„± - <strong>2í¸</strong></li>\n<li>5 profile ìƒì„± - <strong>2í¸</strong></li>\n<li>6 aws_credential_helperë¡œ credentials ìƒì„± - <strong>2í¸</strong></li>\n<li>7 aws cli ì„¤ì¹˜ ë° ëª…ë ¹ì–´ ì‚¬ìš© í•´ë³´ê¸° - <strong>2í¸</strong></li>\n<li>8 EC2ì— SSM Agent ì„¤ì¹˜ - <strong>3í¸</strong></li>\n<li>9 PCì— SSM plugin ì„¤ì¹˜í›„ aws clië¡œ EC2ì ‘ì† - <strong>3í¸</strong></li>\n</ul>\n<hr>\n<h3 id=\"ï¸-1-rootca-ì¸ì¦ì„œ-ë§Œë“¤ê¸°-ca-bundle-ì¸ì¦ì„œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-rootca-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0-ca-bundle-%EC%9D%B8%EC%A6%9D%EC%84%9C\" aria-label=\"ï¸ 1 rootca ì¸ì¦ì„œ ë§Œë“¤ê¸° ca bundle ì¸ì¦ì„œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 1. RootCA ì¸ì¦ì„œ ë§Œë“¤ê¸° (CA Bundle ì¸ì¦ì„œ)</h3>\n<blockquote>\n<p>key ìƒì„±  <code class=\"language-text\">.key íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl genrsa <span class=\"token parameter variable\">-aes256</span> <span class=\"token parameter variable\">-out</span> lesstif-rootca.key <span class=\"token number\">2048</span></code></pre></div>\n<blockquote>\n<p>csr ì¸ì¦ì„œ ìš”ì²­íŒŒì¼ configíŒŒì¼ ë§Œë“¤ê¸° <code class=\"language-text\">.conf íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span>EOF <span class=\"token operator\">></span> rootca_openssl.conf\n<span class=\"token punctuation\">[</span> req <span class=\"token punctuation\">]</span>\ndefault_bits            <span class=\"token operator\">=</span> <span class=\"token number\">2048</span>\ndefault_md              <span class=\"token operator\">=</span> sha1\ndefault_keyfile         <span class=\"token operator\">=</span> lesstif-rootca.key\ndistinguished_name      <span class=\"token operator\">=</span> req_distinguished_name\nextensions             <span class=\"token operator\">=</span> v3_ca\nreq_extensions <span class=\"token operator\">=</span> v3_ca\n \n<span class=\"token punctuation\">[</span> v3_ca <span class=\"token punctuation\">]</span>\nbasicConstraints       <span class=\"token operator\">=</span> critical, CA:TRUE, pathlen:0\nsubjectKeyIdentifier   <span class=\"token operator\">=</span> <span class=\"token builtin class-name\">hash</span>\n<span class=\"token comment\">##authorityKeyIdentifier = keyid:always, issuer:always</span>\nkeyUsage               <span class=\"token operator\">=</span> keyCertSign, cRLSign\nnsCertType             <span class=\"token operator\">=</span> sslCA, emailCA, objCA\n<span class=\"token punctuation\">[</span>req_distinguished_name <span class=\"token punctuation\">]</span>\ncountryName                     <span class=\"token operator\">=</span> Country Name <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> letter code<span class=\"token punctuation\">)</span>\ncountryName_default             <span class=\"token operator\">=</span> KR\ncountryName_min                 <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\ncountryName_max                 <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n\n<span class=\"token comment\"># íšŒì‚¬ëª… ì…ë ¥</span>\norganizationName              <span class=\"token operator\">=</span> Organization Name <span class=\"token punctuation\">(</span>eg, company<span class=\"token punctuation\">)</span>\norganizationName_default      <span class=\"token operator\">=</span> lesstif Inc.\n \n<span class=\"token comment\"># ë¶€ì„œ ì…ë ¥</span>\n<span class=\"token comment\">#organizationalUnitName          = Organizational Unit Name (eg, section)</span>\n<span class=\"token comment\">#organizationalUnitName_default  = Condor Project</span>\n \n<span class=\"token comment\"># SSL ì„œë¹„ìŠ¤í•  domain ëª… ì…ë ¥</span>\ncommonName                      <span class=\"token operator\">=</span> Common Name <span class=\"token punctuation\">(</span>eg, your name or your server<span class=\"token string\">'s hostname)\ncommonName_default             = lesstif'</span>s Self Signed CA\ncommonName_max                  <span class=\"token operator\">=</span> <span class=\"token number\">64</span> </code></pre></div>\n<blockquote>\n<p>confíŒŒì¼ê³¼ keyíŒŒì¼ë¡œ csr ìš”ì²­íŒŒì¼ ìƒì„±í•˜ê¸° <code class=\"language-text\">.csr íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl req <span class=\"token parameter variable\">-new</span> <span class=\"token parameter variable\">-key</span> lesstif-rootca.key <span class=\"token parameter variable\">-out</span> lesstif-rootca.csr <span class=\"token parameter variable\">-config</span> rootca_openssl.conf</code></pre></div>\n<blockquote>\n<p>keyíŒŒì¼ê³¼ csríŒŒì¼ë¡œ crt ì¸ì¦ì„œ ìƒì„±í•˜ê¸° <code class=\"language-text\">.crt íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl x509 <span class=\"token parameter variable\">-req</span> <span class=\"token parameter variable\">-days</span> <span class=\"token number\">3650</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-extensions</span> v3_ca <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-set_serial</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-in</span> lesstif-rootca.csr <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-signkey</span> lesstif-rootca.key <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-out</span> lesstif-rootca.crt <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-extfile</span> rootca_openssl.conf</code></pre></div>\n<blockquote>\n<p>crtì¸ì¦ì„œ -> pem ì¸ì¦ì„œë¡œ ë§Œë“¤ê¸°  <code class=\"language-text\">.pem íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl x509 <span class=\"token parameter variable\">-inform</span> PEM <span class=\"token parameter variable\">-in</span> lesstif-rootca.crt <span class=\"token operator\">></span> lesstif-rootca.pem</code></pre></div>\n<blockquote>\n</blockquote>\n<hr>\n<h3 id=\"ï¸-2-ssl-ì¸ì¦ì„œ-ë§Œë“¤ê¸°-rootcaë¡œ-ì„œëª…í•œ-awsì ‘ì†ìš©-ì¸ì¦ì„œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-ssl-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0-rootca%EB%A1%9C-%EC%84%9C%EB%AA%85%ED%95%9C-aws%EC%A0%91%EC%86%8D%EC%9A%A9-%EC%9D%B8%EC%A6%9D%EC%84%9C\" aria-label=\"ï¸ 2 ssl ì¸ì¦ì„œ ë§Œë“¤ê¸° rootcaë¡œ ì„œëª…í•œ awsì ‘ì†ìš© ì¸ì¦ì„œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 2. SSL ì¸ì¦ì„œ ë§Œë“¤ê¸° (RootCAë¡œ ì„œëª…í•œ awsì ‘ì†ìš© ì¸ì¦ì„œ)</h3>\n<blockquote>\n<p>key ìƒì„±  <code class=\"language-text\">.key íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl genrsa <span class=\"token parameter variable\">-aes256</span> <span class=\"token parameter variable\">-out</span> lesstif.com.key <span class=\"token number\">2048</span></code></pre></div>\n<blockquote>\n<p>passphrase ì œê±°  <code class=\"language-text\">.key íŒŒì¼ ì¬ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span>  lesstif.com.key  lesstif.com.key.enc\nopenssl rsa <span class=\"token parameter variable\">-in</span>  lesstif.com.key.enc <span class=\"token parameter variable\">-out</span> lesstif.com.key</code></pre></div>\n<blockquote>\n<p>csr ì¸ì¦ì„œ ìš”ì²­íŒŒì¼ configíŒŒì¼ ë§Œë“¤ê¸° <code class=\"language-text\">.conf íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span>EOF <span class=\"token operator\">></span> rootca_openssl.conf\n<span class=\"token punctuation\">[</span> req <span class=\"token punctuation\">]</span>\ndefault_bits            <span class=\"token operator\">=</span> <span class=\"token number\">2048</span>\ndefault_md              <span class=\"token operator\">=</span> sha1\ndefault_keyfile         <span class=\"token operator\">=</span> lesstif-rootca.key\ndistinguished_name      <span class=\"token operator\">=</span> req_distinguished_name\nextensions             <span class=\"token operator\">=</span> v3_user\n<span class=\"token comment\">## ì¸ì¦ì„œ ìš”ì²­ì‹œì—ë„ extension ì´ ë“¤ì–´ê°€ë©´ authorityKeyIdentifier ë¥¼ ì°¾ì§€ ëª»í•´ ì—ëŸ¬ê°€ ë‚˜ë¯€ë¡œ ë§‰ì•„ë‘”ë‹¤.</span>\n<span class=\"token comment\">## req_extensions = v3_user</span>\n\n<span class=\"token punctuation\">[</span> v3_user <span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Extensions to add to a certificate request</span>\nbasicConstraints <span class=\"token operator\">=</span> CA:FALSE\nauthorityKeyIdentifier <span class=\"token operator\">=</span> keyid,issuer\nsubjectKeyIdentifier <span class=\"token operator\">=</span> <span class=\"token builtin class-name\">hash</span>\nkeyUsage <span class=\"token operator\">=</span> nonRepudiation, digitalSignature, keyEncipherment\n<span class=\"token comment\">## SSL ìš© í™•ì¥í‚¤ í•„ë“œ</span>\nextendedKeyUsage <span class=\"token operator\">=</span> serverAuth,clientAuth\nsubjectAltName          <span class=\"token operator\">=</span> @alt_names\n<span class=\"token punctuation\">[</span> alt_names<span class=\"token punctuation\">]</span>\n<span class=\"token comment\">## Subject AltNameì˜ DNSName fieldì— SSL Host ì˜ ë„ë©”ì¸ ì´ë¦„ì„ ì ì–´ì¤€ë‹¤.</span>\n<span class=\"token comment\">## ë©€í‹° ë„ë©”ì¸ì¼ ê²½ìš° *.lesstif.com ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆë‹¤.</span>\nDNS.1   <span class=\"token operator\">=</span> www.lesstif.com\nDNS.2   <span class=\"token operator\">=</span> lesstif.com\nDNS.3   <span class=\"token operator\">=</span> *.lesstif.com\n\n<span class=\"token punctuation\">[</span>req_distinguished_name <span class=\"token punctuation\">]</span>\ncountryName                     <span class=\"token operator\">=</span> Country Name <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> letter code<span class=\"token punctuation\">)</span>\ncountryName_default             <span class=\"token operator\">=</span> KR\ncountryName_min                 <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\ncountryName_max                 <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n\n<span class=\"token comment\"># íšŒì‚¬ëª… ì…ë ¥</span>\norganizationName              <span class=\"token operator\">=</span> Organization Name <span class=\"token punctuation\">(</span>eg, company<span class=\"token punctuation\">)</span>\norganizationName_default      <span class=\"token operator\">=</span> lesstif Inc.\n \n<span class=\"token comment\"># ë¶€ì„œ ì…ë ¥</span>\norganizationalUnitName          <span class=\"token operator\">=</span> Organizational Unit Name <span class=\"token punctuation\">(</span>eg, section<span class=\"token punctuation\">)</span>\norganizationalUnitName_default  <span class=\"token operator\">=</span> lesstif SSL Project\n \n<span class=\"token comment\"># SSL ì„œë¹„ìŠ¤í•  domain ëª… ì…ë ¥</span>\ncommonName                      <span class=\"token operator\">=</span> Common Name <span class=\"token punctuation\">(</span>eg, your name or your server's <span class=\"token function\">hostname</span><span class=\"token punctuation\">)</span>\ncommonName_default             <span class=\"token operator\">=</span> lesstif.com\ncommonName_max                  <span class=\"token operator\">=</span> <span class=\"token number\">64</span></code></pre></div>\n<blockquote>\n<p>confíŒŒì¼ê³¼ keyíŒŒì¼ë¡œ csr ìš”ì²­íŒŒì¼ ìƒì„±í•˜ê¸° <code class=\"language-text\">.csr íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl req <span class=\"token parameter variable\">-new</span> <span class=\"token parameter variable\">-key</span> lesstif.com.key <span class=\"token parameter variable\">-out</span> lesstif.com.csr <span class=\"token parameter variable\">-config</span> host_openssl.conf</code></pre></div>\n<blockquote>\n<p>keyíŒŒì¼ê³¼ csríŒŒì¼ë¡œ crt ì¸ì¦ì„œ ìƒì„±í•˜ê¸° <code class=\"language-text\">.crt íŒŒì¼ ìƒì„±ë¨</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl x509 <span class=\"token parameter variable\">-req</span> <span class=\"token parameter variable\">-days</span> <span class=\"token number\">1825</span> <span class=\"token parameter variable\">-extensions</span> v3_user <span class=\"token parameter variable\">-in</span> lesstif.com.csr <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-CA</span> lesstif-rootca.crt <span class=\"token parameter variable\">-CAcreateserial</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-CAkey</span>  lesstif-rootca.key <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-out</span> lesstif.com.crt  <span class=\"token parameter variable\">-extfile</span> host_openssl.conf</code></pre></div>\n<hr>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p><a href=\"https://www.lesstif.com/system-admin/openssl-root-ca-ssl-6979614.html\">https://www.lesstif.com/system-admin/openssl-root-ca-ssl-6979614.html</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-rootca-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0-ca-bundle-%EC%9D%B8%EC%A6%9D%EC%84%9C\">âŒ¨ï¸ 1. RootCA ì¸ì¦ì„œ ë§Œë“¤ê¸° (CA Bundle ì¸ì¦ì„œ)</a></li>\n<li><a href=\"#%EF%B8%8F-2-ssl-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0-rootca%EB%A1%9C-%EC%84%9C%EB%AA%85%ED%95%9C-aws%EC%A0%91%EC%86%8D%EC%9A%A9-%EC%9D%B8%EC%A6%9D%EC%84%9C\">âŒ¨ï¸ 2. SSL ì¸ì¦ì„œ ë§Œë“¤ê¸° (RootCAë¡œ ì„œëª…í•œ awsì ‘ì†ìš© ì¸ì¦ì„œ)</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 01, 2023","title":"[AWS] AWS CLI ì‚¬ìš©í•˜ê¸° - ì¸ì¦ì„œ ë§Œë“¤ê¸°(1)","categories":"AWS","author":"sb","emoji":"â˜ï¸"},"fields":{"slug":"/4-aws-1/"}},"prev":{"id":"d9236e0d-b11e-5684-a446-db016218491a","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>awsclië¥¼ Roles Anywhereë¥¼ í†µí•´ì„œ ì ‘ì† í•´ë³´ìğŸ™Œ</p>\n<ul>\n<li>1 RootCA ì¸ì¦ì„œ ë§Œë“¤ê¸° (CA Bundle ì¸ì¦ì„œ) - <strong>1í¸</strong></li>\n<li>2 SSL ì¸ì¦ì„œ ë§Œë“¤ê¸° (RootCAë¡œ ì„œëª…í•œ awsì ‘ì†ìš© ì¸ì¦ì„œ) - <strong>1í¸</strong></li>\n<li>3 CA Bundle ë“±ë¡(trust-anchor) - <strong>2í¸</strong></li>\n<li>4 role ìƒì„± - <strong>2í¸</strong></li>\n<li>5 profile ìƒì„± - <strong>2í¸</strong></li>\n<li>6 aws_credential_helperë¡œ credentials ìƒì„± - <strong>2í¸</strong></li>\n<li>7 aws cli ì„¤ì¹˜ ë° ëª…ë ¹ì–´ ì‚¬ìš© í•´ë³´ê¸° - <strong>2í¸</strong></li>\n<li>8 EC2ì— SSM Agent ì„¤ì¹˜ - <strong>3í¸</strong></li>\n<li>9 PCì— SSM plugin ì„¤ì¹˜í›„ aws clië¡œ EC2ì ‘ì† - <strong>3í¸</strong></li>\n</ul>\n<hr>\n<h3 id=\"ï¸-8-ec2ì—-ssm-agent-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-8-ec2%EC%97%90-ssm-agent-%EC%84%A4%EC%B9%98\" aria-label=\"ï¸ 8 ec2ì— ssm agent ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 8. EC2ì— SSM Agent ì„¤ì¹˜</h3>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/agent-install-al.html\">https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/agent-install-al.html</a> <br></p>\n<blockquote>\n<p>EC2ë¥¼ ì ‘ì†í•˜ì—¬ ì•„í‚¤í…ì²˜ì— ë”°ë¥¸ Agent ì„¤ì¹˜ <br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì„¤ì¹˜</span>\n<span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm\n\n<span class=\"token comment\"># ì„¤ì¹˜ í™•ì¸</span>\n<span class=\"token function\">sudo</span> systemctl status amazon-ssm-agent</code></pre></div>\n<hr>\n<h3 id=\"ï¸-9-pcì—-ssm-plugin-ì„¤ì¹˜í›„-aws-clië¡œ-ec2ì ‘ì†\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-9-pc%EC%97%90-ssm-plugin-%EC%84%A4%EC%B9%98%ED%9B%84-aws-cli%EB%A1%9C-ec2%EC%A0%91%EC%86%8D\" aria-label=\"ï¸ 9 pcì— ssm plugin ì„¤ì¹˜í›„ aws clië¡œ ec2ì ‘ì† permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 9. PCì— SSM plugin ì„¤ì¹˜í›„ aws clië¡œ EC2ì ‘ì†</h3>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html\">https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html</a>  <br></p>\n<blockquote>\n<p>ë³¸ì¸ OSì— ë§ëŠ” í”Œë¡œê·¸ì¸ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜ <br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ë‹¤ìš´ë¡œë“œ</span>\n<span class=\"token function\">curl</span> <span class=\"token string\">\"https://s3.amazonaws.com/session-manager-downloads/plugin/latest/mac/sessionmanager-bundle.zip\"</span> <span class=\"token parameter variable\">-o</span> <span class=\"token string\">\"sessionmanager-bundle.zip\"</span>\n\n<span class=\"token comment\"># ì••ì¶•í•´ì œ </span>\n<span class=\"token function\">unzip</span> sessionmanager-bundle.zip\n\n<span class=\"token comment\"># ì„¤ì¹˜ ëª…ë ¹</span>\n<span class=\"token function\">sudo</span> ./sessionmanager-bundle/install <span class=\"token parameter variable\">-i</span> /usr/local/sessionmanagerplugin <span class=\"token parameter variable\">-b</span> /usr/local/bin/session-manager-plugin</code></pre></div>\n<blockquote>\n<p>AWS CLIë¡œ SSM ìœ¼ë¡œ EC2 ì ‘ì† í•´ë³´ê¸°<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># InstanceId ë¡œ grep ì„ í•¨</span>\n<span class=\"token operator\">></span> aws ec2 describe-instances <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> InstanceId\n<span class=\"token comment\"># ì´ëŸ°ê°’ì´ ë‚˜ì˜´ \"InstanceId\": \"i-0504b7490773b25be\"</span>\n\n<span class=\"token comment\"># ìœ„ì— ë‚˜ì˜¨ IDë¡œ ì ‘ì†í•˜ë©´ EC2 ì ‘ê·¼ë¨</span>\n<span class=\"token operator\">></span> aws ssm start-session <span class=\"token parameter variable\">--target</span> i-0504b7490773b25be</code></pre></div>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/agent-install-al.html\">https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/agent-install-al.html</a><br>\n<a href=\"https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html\">https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-8-ec2%EC%97%90-ssm-agent-%EC%84%A4%EC%B9%98\">âŒ¨ï¸ 8. EC2ì— SSM Agent ì„¤ì¹˜</a></li>\n<li><a href=\"#%EF%B8%8F-9-pc%EC%97%90-ssm-plugin-%EC%84%A4%EC%B9%98%ED%9B%84-aws-cli%EB%A1%9C-ec2%EC%A0%91%EC%86%8D\">âŒ¨ï¸ 9. PCì— SSM plugin ì„¤ì¹˜í›„ aws clië¡œ EC2ì ‘ì†</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 03, 2023","title":"[AWS] AWS CLI ì‚¬ìš©í•˜ê¸° - SSMìœ¼ë¡œ EC2ì„œë²„ ì ‘ì†(3)","categories":"AWS","author":"sb","emoji":"â˜ï¸"},"fields":{"slug":"/4-aws-3/"}},"site":{"siteMetadata":{"siteUrl":"https://sbbs.me","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/4-aws-2/","nextSlug":"/4-aws-1/","prevSlug":"/4-aws-3/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}