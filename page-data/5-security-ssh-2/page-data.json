{"componentChunkName":"component---src-templates-blog-template-js","path":"/5-security-ssh-2/","result":{"data":{"cur":{"id":"913932ad-d047-50d6-91c9-e7e348cedeb0","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>SSH-KEY ì ‘ê·¼ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•´ ë³´ìğŸ™Œ</p>\n<ul>\n<li>1 sshd_config ì„¤ì •</li>\n<li>2 (client)api ìš”ì²­ ì‰˜ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼</li>\n<li>3 (server)api ì‘ë‹µ ì„œë²„ ì½”ë“œ</li>\n<li>4 ssh-key ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</li>\n</ul>\n<hr>\n<h3 id=\"ï¸-1-sshd_config-ì„¤ì •\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-sshd_config-%EC%84%A4%EC%A0%95\" aria-label=\"ï¸ 1 sshd_config ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 1. sshd_config ì„¤ì •</h3>\n<blockquote>\n<p>/etc/ssh/sshd_conifg ì„¤ì • <br>\nì„¤ì •ì€ ì•„ë˜ configì—ì„œ 2ê°œë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vi</span> /etc/ssh/sshd_config\n<span class=\"token comment\"># ssh-keyë¡œ ì ‘ê·¼ì‹œ api_key íŒŒì¼ì„ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•œë‹¤</span>\nAuthorizedKeysCommand /usr/sbin/api_key\n\n<span class=\"token comment\"># AuthorizedKeysFileì€ rootê¶Œí•œë§Œ ìˆ˜ì •ì´ ê°€ëŠ¥í•œ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½í•œë‹¤ </span>\nAuthorizedKeysFile /root/.ssh/authorized_keys\n</code></pre></div>\n<hr>\n<h3 id=\"ï¸-2-usrsbinapi_key-ì‰˜-ìŠ¤í¬ë¦½íŠ¸-íŒŒì¼\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-usrsbinapi_key-%EC%89%98-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%ED%8C%8C%EC%9D%BC\" aria-label=\"ï¸ 2 usrsbinapi_key ì‰˜ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 2. /usr/sbin/api_key ì‰˜ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼</h3>\n<blockquote>\n<p>apië¥¼ í˜¸ì¶œí•˜ì—¬ ssh-keyë¥¼ ë°›ì•„ì˜¨ë‹¤ <br></p>\n<ul>\n<li>ë³€ìˆ˜<code class=\"language-text\">$1</code>ì€ ì ‘ê·¼ì‹œë„í•œ ê³„ì •ëª…ì„ ê°€ì ¸ì˜¬ìˆ˜ ìˆë‹¤<br></li>\n</ul>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># sh-key api í˜¸ì¶œ</span>\n<span class=\"token function\">vi</span> /etc/sbin/api_key\n\n<span class=\"token comment\">#!/bin/bash</span>\n\n<span class=\"token function\">curl</span> http://localhost:8081/sshkey/<span class=\"token variable\">$1</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-3-api-ì„œë²„-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-api-%EC%84%9C%EB%B2%84-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 3 api ì„œë²„ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 3. api ì„œë²„ ì½”ë“œ</h3>\n<blockquote>\n<p>ê°„ë‹¨í•˜ê²Œ ssh-keyë§Œ ë¦¬í„´í•˜ëŠ” ì½”ë“œì„<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"fmt\"</span>\n\t<span class=\"token string\">\"log\"</span>\n\t<span class=\"token string\">\"net/http\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\thttp<span class=\"token punctuation\">.</span><span class=\"token function\">HandleFunc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/sshkey\"</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span>\n\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Fatal</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">.</span><span class=\"token function\">ListenAndServe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"8081\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>w http<span class=\"token punctuation\">.</span>ResponseWriter<span class=\"token punctuation\">,</span> r <span class=\"token operator\">*</span>http<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Fprint</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> <span class=\"token string\">\"ssh-rsa AAAAB3NzaC1y~~ ec2-user@ip-172-31-00-00.ap-northeast-2.compute.internal\"</span><span class=\"token punctuation\">)</span>\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ê³„ì •ëª… </span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre></div>\n<hr>\n<h3 id=\"ï¸-4-ssh-key-ì¤‘ì•™ê´€ë¦¬-í”Œë¡œìš°\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-4-ssh-key-%EC%A4%91%EC%95%99%EA%B4%80%EB%A6%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\" aria-label=\"ï¸ 4 ssh key ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 4. ssh-key ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</h3>\n<blockquote>\n<p>ì‚¬ìš©ìëŠ” ë¯¸ë¦¬ ssh ì¤‘ì•™ê´€ë¦¬ ì„œë²„ì— <code class=\"language-text\">srcIP</code>,<code class=\"language-text\">dstIP</code>,<code class=\"language-text\">ssh-key</code>,<code class=\"language-text\">ê³„ì •</code> 4ê°€ì§€ë¥¼  ì •ì±…ìœ¼ë¡œ ë„£ì–´ë‘ê³  <br>\nsourceì™€ dest IP,ì ‘ê·¼í•˜ëŠ” ê³„ì •ì´ DBì— ìˆìœ¼ë©´ <code class=\"language-text\">200, ssh-key</code>ë¥¼ ë¦¬í„´í•´ì„œ ì ‘ê·¼ì€ <strong>ì„±ê³µ</strong>í•œë‹¤<br>\nsourceì™€ dest IP,ì ‘ê·¼í•˜ëŠ” ê³„ì •ì´ DBì— ì—†ìœ¼ë©´ <code class=\"language-text\">400</code>ì„ ë¦¬í„´í•´ê³  ssh-keyì ‘ê·¼ì„ <strong>ì‹¤íŒ¨</strong>í•œë‹¤<br>\nì•„ë˜ í”Œë¡œìš°ë¡œ SSH-KEYë¥¼ ì¤‘ì•™ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤<br></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACK0lEQVQ4y5WT22/TMBTG82/zzhtPICH2gNBAGuVaDY0hHihQTaAC6qC3rZd0bbcmcZq2SVMnTmInH4q7VukaJnGkyMf2yU+fPx8ryIkkSa7HGEKIrbVsznmUTrbWlDzYenOsm2i0OgjDcLMXx/EKJgQ6vSH6F6OMgCQfmEaq7PuvJh7sPcHFYIggCDAaXWI8HiMMAxjEwtujEvYPXiAMo21gVlU2P6nUcffefeiGsVG1VuizEAevj/Ho8f5mTQLXgJvQtYfZ4pvheR5c190SouQdNy/Pzh3HgTmZwLZtCc2G4iyW+HnaQuuss/XzBpIB+R5FwHwgVS44GGMSalkWCCHgnEM5a/ex9/QNyrUezOk8t4VMh+NqJqDqFAPCoM0FiCPg+QyUUlmXWiOPbBAThx+/4LiqQr3U5SYLAnkUwTkikaBrCLR1gebAxWl3inMtQs8EZgtfqs7tQ0JMUM+T8g3DgKbpcBwb1A/Q1hj+qDZKJ1UUXhVRaWpojjyMyQz+tYcbYJoIkd6mkL2X+pCOIk59EqB+KIGNIUWh+Al3HhbwuTnB+RWDZVPp58rqDPC2CHkClXD0JwlqFwt8qI7xrWWi2pli6e8+SyXvZrNtEkQxekaEHhGoNHSUf3RRU22p2PX4Tlsp/1KWBaYK21qI4vsynj0/RL1vo28Brs/zFd4GDPlKYccQOCr9xst3X1EfLOWcMvF/wHXdkgnMlgK2l2BOY/k5nth5qinwL89Hzp6xvSOAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ì‚¬ì§„2\"\n        title=\"ì‚¬ì§„2\"\n        src=\"/static/9a93cdfc87337e2bd2c93784ada059b8/37523/2.png\"\n        srcset=\"/static/9a93cdfc87337e2bd2c93784ada059b8/e9ff0/2.png 180w,\n/static/9a93cdfc87337e2bd2c93784ada059b8/f21e7/2.png 360w,\n/static/9a93cdfc87337e2bd2c93784ada059b8/37523/2.png 720w,\n/static/9a93cdfc87337e2bd2c93784ada059b8/302a4/2.png 1080w,\n/static/9a93cdfc87337e2bd2c93784ada059b8/21482/2.png 1350w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p><a href=\"https://www.popit.kr/ssh-key-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EA%B4%80%EB%A6%AC-%EB%B0%A9%EB%B2%95/\">https://www.popit.kr/ssh-key-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EA%B4%80%EB%A6%AC-%EB%B0%A9%EB%B2%95/</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-sshd_config-%EC%84%A4%EC%A0%95\">âŒ¨ï¸ 1. sshd_config ì„¤ì •</a></li>\n<li><a href=\"#%EF%B8%8F-2-usrsbinapi_key-%EC%89%98-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%ED%8C%8C%EC%9D%BC\">âŒ¨ï¸ 2. /usr/sbin/api_key ì‰˜ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼</a></li>\n<li><a href=\"#%EF%B8%8F-3-api-%EC%84%9C%EB%B2%84-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 3. api ì„œë²„ ì½”ë“œ</a></li>\n<li><a href=\"#%EF%B8%8F-4-ssh-key-%EC%A4%91%EC%95%99%EA%B4%80%EB%A6%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\">âŒ¨ï¸ 4. ssh-key ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ ì†Œê°œ SSH-KEY ì ‘ê·¼ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•´ ë³´ìğŸ™Œ 1 sshd_config ì„¤ì • 2 (client)api ìš”ì²­ ì‰˜ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ 3 (server)api ì‘ë‹µ ì„œë²„ ì½”ë“œ 4 ssh-key ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš° âŒ¨ï¸ 1. sshd_config ì„¤ì • /etc/ssh/sshd_conifg ì„¤ì • \nì„¤ì •ì€ ì•„ë˜ configì—ì„œ 2ê°œë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤ âŒ¨ï¸ 2. /usr/sbin/api_key ì‰˜ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ apië¥¼ í˜¸ì¶œí•˜ì—¬ ssh-keyë¥¼ ë°›ì•„ì˜¨ë‹¤  ë³€ìˆ˜ì€ ì ‘ê·¼ì‹œë„í•œ ê³„ì •ëª…ì„ ê°€ì ¸ì˜¬ìˆ˜ ìˆë‹¤ âŒ¨ï¸ 3. api ì„œë²„ ì½”ë“œ ê°„ë‹¨í•˜ê²Œ ssh-keyë§Œ ë¦¬í„´í•˜ëŠ” ì½”ë“œì„ âŒ¨ï¸ 4. ssh-key ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš° ì‚¬ìš©ìëŠ” ë¯¸ë¦¬ ssh ì¤‘ì•™ê´€ë¦¬ ì„œë²„ì— ,,, 4ê°€ì§€ë¥¼  ì •ì±…ìœ¼ë¡œ ë„£ì–´ë‘ê³  \nsourceì™€ dest IP,ì ‘ê·¼í•˜ëŠ” ê³„ì •ì´ DBì— ìˆìœ¼ë©´ ë¥¼ ë¦¬í„´í•´ì„œ ì ‘ê·¼ì€ ì„±ê³µí•œë‹¤\nsourceì™€ dest IP,ì ‘ê·¼í•˜ëŠ” ê³„ì •ì´ DBì— ì—†ìœ¼ë©´ ì„ ë¦¬í„´í•´ê³  ssh-keyì ‘ê·¼ì„ ì‹¤íŒ¨í•œë‹¤\nì•„ë˜ í”Œë¡œìš°ë¡œ SSH-KEYë¥¼ ì¤‘ì•™ê´€ë¦¬ë¥¼ â€¦","frontmatter":{"date":"June 05, 2023","title":"[ë³´ì•ˆ] SSH ì ‘ê·¼ ì¤‘ì•™ê´€ë¦¬ - SSH-KEY ê´€ë¦¬ (2)","categories":"ë³´ì•ˆ","author":"sb","emoji":"ğŸ”"},"fields":{"slug":"/5-security-ssh-2/"}},"next":{"id":"14ecab48-f067-5833-832e-13cde7c7664b","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>SSH ì ‘ê·¼ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•´ ë³´ìğŸ™Œ</p>\n<ul>\n<li>1 pam ì„¤ì •</li>\n<li>2 (client)api ìš”ì²­ ì‰˜íŒŒì¼ ì„¤ì •</li>\n<li>3 (server)api ì‘ë‹µ ì„œë²„ ì½”ë“œ</li>\n<li>4 ssh ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</li>\n</ul>\n<hr>\n<h3 id=\"ï¸-1-pam-ì„¤ì •\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-pam-%EC%84%A4%EC%A0%95\" aria-label=\"ï¸ 1 pam ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 1. pam ì„¤ì •</h3>\n<blockquote>\n<p>pam(Pluggable Authentication Module)ì€ ì‚¬ìš© ê¶Œí•œì„ ì œì–´í•˜ëŠ” ëª¨ë“ˆì´ë‹¤<br></p>\n<ul>\n<li>1ë²ˆì§¸ ì¸ì <code class=\"language-text\">session</code>ì€ sshd ì„¸ì…˜ì„ ì—´ì—ˆì„ë•Œ ì˜µì…˜ì´ë‹¤ <br></li>\n<li>2ë²ˆì§¸ ì¸ì <code class=\"language-text\">required</code> - í•´ë‹¹ ì„¤ì •ìœ¼ë¡œ ì§„í–‰ ì‹œ ì‹¤íŒ¨í•˜ë©´ ì¸ì¦ì„ ê±°ë¶€í•œë‹¤ <br></li>\n<li>2ë²ˆì§¸ ì¸ì <code class=\"language-text\">optional</code> - í•´ë‹¹ ì„¤ì •ìœ¼ë¡œ ì§„í–‰ ì‹œ ì‹¤íŒ¨í•´ë„ ì¸ì¦ì€ ì„±ê³µí•œë‹¤ <br></li>\n<li>3ë²ˆì§¸ ì¸ì <code class=\"language-text\">pam_exec.so</code> ëŠ” ë‚´ê°€ ì§€ì •í•œ íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ì˜µì…˜ì´ë‹¤ <br></li>\n<li>4ë²ˆì§¸ ì¸ì <code class=\"language-text\">/etc/ssh.sh</code> ëŠ” ë‚´ê°€ ì§€ì •í•œ íŒŒì¼ì˜ ê²½ë¡œì´ë‹¤ <br></li>\n</ul>\n<p>/etc/pam.d/sshd ì„¤ì • <br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vi</span> /etc/pam.d/sshd\n<span class=\"token comment\"># ë§¨ë§ˆì§€ë§‰ ì¤„ì— ì•„ë˜ ì˜µì…˜ì„ ì¶”ê°€í•œë‹¤ (ì˜ëª»ì„¤ì •í•˜ë©´ ì˜ì˜ sshì ‘ê·¼ì´ì•ˆë˜ë‹ˆ.. í…ŒìŠ¤íŠ¸ëŠ” optionalë¡œ)</span>\nsession optional pam_exec.so /etc/ssh.sh\n</code></pre></div>\n<hr>\n<h3 id=\"ï¸-2-etcsshsh-api-ì„¤ì •\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-etcsshsh-api-%EC%84%A4%EC%A0%95\" aria-label=\"ï¸ 2 etcsshsh api ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 2. /etc/ssh.sh api ì„¤ì •</h3>\n<blockquote>\n<p>exit code <code class=\"language-text\">0</code>ì€ ì •ìƒ ì¢…ë£Œ, exit code <code class=\"language-text\">1</code>ì€ ì—ëŸ¬ ë¹„ì •ìƒì¢…ë£Œ <br></p>\n<ul>\n<li><code class=\"language-text\">$PAM_RHOST</code>ëŠ” ì ‘ê·¼ì‹œë„í•œ Remote í˜¸ìŠ¤íŠ¸<br></li>\n<li><code class=\"language-text\">$PAM_USER</code>ëŠ” ì ‘ê·¼í•˜ë ¤ëŠ” User ê°’ì„ ë°›ì•„ì˜¬ìˆ˜ìˆë‹¤ <br></li>\n</ul>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># apië¡œ ë¡œê·¸ì¸ ì„±ê³µ api í˜¸ì¶œ</span>\n<span class=\"token function\">vi</span> /etc/ssh.sh\n\n\n<span class=\"token comment\">#!/bin/bash</span>\n<span class=\"token assign-left variable\">STATUS</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-o</span> /dev/null <span class=\"token parameter variable\">-w</span> <span class=\"token string\">\"%{http_code}\"</span> <span class=\"token string\">\"http://localhost:8089/api1/<span class=\"token variable\">$PAM_RHOST</span>/<span class=\"token variable\">$PAM_USER</span>\"</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$STATUS</span> <span class=\"token parameter variable\">-eq</span> <span class=\"token number\">200</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ë¡œê·¸ì¸ ì„±ê³µ\"</span>\n  <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ë¡œê·¸ì¸ ì‹¤íŒ¨\"</span>\n  <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-3-api-ì„œë²„-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-api-%EC%84%9C%EB%B2%84-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 3 api ì„œë²„ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 3. api ì„œë²„ ì½”ë“œ</h3>\n<blockquote>\n<p><strong>api 1</strong>ì€ response code <code class=\"language-text\">200</code>, <strong>api 2</strong>ëŠ” response code <code class=\"language-text\">400</code>ì„ ì¤€ë‹¤<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"log\"</span>\n\t<span class=\"token string\">\"net/http\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\thttp<span class=\"token punctuation\">.</span><span class=\"token function\">HandleFunc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api1\"</span><span class=\"token punctuation\">,</span> index1<span class=\"token punctuation\">)</span>\n\thttp<span class=\"token punctuation\">.</span><span class=\"token function\">HandleFunc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api2\"</span><span class=\"token punctuation\">,</span> index2<span class=\"token punctuation\">)</span>\n\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Fatal</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">.</span><span class=\"token function\">ListenAndServe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":8089\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">index1</span><span class=\"token punctuation\">(</span>w http<span class=\"token punctuation\">.</span>ResponseWriter<span class=\"token punctuation\">,</span> r <span class=\"token operator\">*</span>http<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    sourceip <span class=\"token operator\">:=</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">Split</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>RemoteAddr<span class=\"token punctuation\">,</span> <span class=\"token string\">\":\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Source IP \"</span><span class=\"token punctuation\">,</span>sourceip<span class=\"token punctuation\">)</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Destination IP \"</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì‚¬ìš©ì\"</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\tw<span class=\"token punctuation\">.</span><span class=\"token function\">WriteHeader</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">byte</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">.</span><span class=\"token function\">StatusText</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">return</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">index2</span><span class=\"token punctuation\">(</span>w http<span class=\"token punctuation\">.</span>ResponseWriter<span class=\"token punctuation\">,</span> r <span class=\"token operator\">*</span>http<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    sourceip <span class=\"token operator\">:=</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">Split</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>RemoteAddr<span class=\"token punctuation\">,</span> <span class=\"token string\">\":\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Source IP \"</span><span class=\"token punctuation\">,</span>sourceip<span class=\"token punctuation\">)</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Destination IP \"</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì‚¬ìš©ì\"</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\tw<span class=\"token punctuation\">.</span><span class=\"token function\">WriteHeader</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span>\n\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">byte</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">.</span><span class=\"token function\">StatusText</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">return</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<hr>\n<h3 id=\"ï¸-4-ssh-ì¤‘ì•™ê´€ë¦¬-í”Œë¡œìš°\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-4-ssh-%EC%A4%91%EC%95%99%EA%B4%80%EB%A6%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\" aria-label=\"ï¸ 4 ssh ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 4. ssh ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</h3>\n<blockquote>\n<p>ì‚¬ìš©ìëŠ” ë¯¸ë¦¬ ssh ì¤‘ì•™ê´€ë¦¬ ì„œë²„ì— source,dest IPë¥¼ apiì„œë²„ì— ì •ì±…ìœ¼ë¡œ ë„£ì–´ë‘ê³  <br>\nsourceì™€ dest IPê°€ DBì— ìˆìœ¼ë©´ <code class=\"language-text\">200</code>ì„ ë¦¬í„´í•´ì„œ ì ‘ê·¼ì„±ê³µ <br>\nsourceì™€ dest IPê°€ DBì— ì—†ìœ¼ë©´ <code class=\"language-text\">400</code>ì„ ë¦¬í„´í•´ì„œ ì ‘ê·¼ì‹¤íŒ¨<br>\nì•„ë˜ í”Œë¡œìš°ë¡œ SSH ì¤‘ì•™ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤<br></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDElEQVQ4y52Tz2/TMBzF+39z44bggoQ4gISYNMEBiU1cKBpsjF8bpbSrCk27rfRX0jS0zU8ndpw4D9ldIGvTHbBkOXacT977+rmCkpZlmRo9z0Mcx2VbQCmF63rX9stW2QZjLEat8RO1elMughACx3HUD9I0gXY+xNHHU7Ve/G4rkIQMj3Ze4t79B2ruui4sy0JEKTiPUT2s4dbtOzBnM/VeCLECSkDei0AhMjRaHTRb7VLLo4mJg8NjsKuSlCpch+ZNwvM1WTtCQpAgQByzDXcVzhNMzd/K0jpU2sitIBNIEw5GI5DAh2PbsG0bvu+rw4uiaKVwMDLwfO8Nvp51wDn/C8tFpiKDTwWWPsPIWCBgGUgMxDxRIiRMjmEYroCX/QEeP9tH9WyIkfGvwLlSO0ihGQm6BoemM3SnCbqmgD6PQKNw0/LqRCNcjqcII6qiYRhTzCwLmUix8FP0TIFmz0L17QccnbSh6Ry/DA8hCQqOioeSZUh4rDImi84YU6MsujEn+DGmeH/aw92HO3jyugZtwtDXHXDONoNdjE3xRf648BP0zBQ9neLVlwvs10Zo9BbQF7Q0EZWi5DJ4DuxMInxqDPFds1A/t68Bb7x665mcewkuLOCkNcbT3T28+9zGYAnMnGS7wpuAy0AqzPCtO8fuiwMc1/tqPnP4/wFlDh2Swg3FVV/Nk7T8Vv0BrheCaqxkHgIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ì‚¬ì§„1\"\n        title=\"ì‚¬ì§„1\"\n        src=\"/static/acdd72eead2f01abc53ab46504fdc3aa/37523/1.png\"\n        srcset=\"/static/acdd72eead2f01abc53ab46504fdc3aa/e9ff0/1.png 180w,\n/static/acdd72eead2f01abc53ab46504fdc3aa/f21e7/1.png 360w,\n/static/acdd72eead2f01abc53ab46504fdc3aa/37523/1.png 720w,\n/static/acdd72eead2f01abc53ab46504fdc3aa/302a4/1.png 1080w,\n/static/acdd72eead2f01abc53ab46504fdc3aa/bb543/1.png 1418w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p><a href=\"https://wariua.github.io/linux-pam-docs-ko/sag-pam_exec.html\">https://wariua.github.io/linux-pam-docs-ko/sag-pam_exec.html</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-pam-%EC%84%A4%EC%A0%95\">âŒ¨ï¸ 1. pam ì„¤ì •</a></li>\n<li><a href=\"#%EF%B8%8F-2-etcsshsh-api-%EC%84%A4%EC%A0%95\">âŒ¨ï¸ 2. /etc/ssh.sh api ì„¤ì •</a></li>\n<li><a href=\"#%EF%B8%8F-3-api-%EC%84%9C%EB%B2%84-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 3. api ì„œë²„ ì½”ë“œ</a></li>\n<li><a href=\"#%EF%B8%8F-4-ssh-%EC%A4%91%EC%95%99%EA%B4%80%EB%A6%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\">âŒ¨ï¸ 4. ssh ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 04, 2023","title":"[ë³´ì•ˆ] SSH ì ‘ê·¼ ì¤‘ì•™ê´€ë¦¬ - pam ì„¤ì •(1)","categories":"ë³´ì•ˆ","author":"sb","emoji":"ğŸ”"},"fields":{"slug":"/5-security-ssh-1/"}},"prev":{"id":"f8f08c61-69a2-50e5-9f39-cc0f4160e85c","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>SSH-CERT ì ‘ê·¼ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•´ ë³´ìğŸ™Œ<br></p>\n<p><strong>ğŸ”µ SSH-KEY ë³´ë‹¤ SSH-CERTë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” 4ê°€ì§€</strong> <br></p>\n<ul>\n<li>1 í”„ë¡œë¹„ì €ë‹í•˜ê±°ë‚˜ <code class=\"language-text\">í”„ë¡œë¹„ì €ë‹ í•´ì œí•  í•„ìš”</code>ê°€ ì—†ìŒ</li>\n<li>2 ì¸ì¦ì„œëŠ” ì‹¤ì œë¡œ <code class=\"language-text\">ë‹¨ í•œ ì¤„</code>ì˜ ì½”ë“œë¡œ êµ¬í˜„í•˜ê¸°ê°€ ë§¤ìš° ê°„ë‹¨í•¨</li>\n<li>3 ìˆ˜ëª…ì´ ì§§ê³  ìì²´ íŒŒê´´ì ì´ë¯€ë¡œ ìë™ìœ¼ë¡œ <code class=\"language-text\">ê¸°í•œ ë§Œë£Œ</code>ë¨</li>\n<li>4 keyëŠ” ì‚¬ìš©ìê°€ ìƒì„± ë° ê´€ë¦¬ë¥¼ í•˜ì§€ë§Œ certëŠ” <code class=\"language-text\">CISOê°€ ê´€ë¦¬</code>ë¥¼ í•  ìˆ˜ ìˆìŒ</li>\n</ul>\n<p><strong>ğŸ”´ ë§ì€ ê¸°ì—…ë“¤ì´ SSH-KEYë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ  3ê°€ì§€</strong> <br></p>\n<ul>\n<li>1 <code class=\"language-text\">ì˜ëª»ëœ PR</code> : ì¡°ì§ì—ì„œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” ë° ì¶©ë¶„í•œ ì¶”ì§„ë ¥ì´ ì—†ìŒ</li>\n<li>(Facebook, Uber, Netflix, Lyft ë“±ì´ SSH ì¸ì¦ì„œë¥¼ ì±„íƒí–ˆì§€ë§Œ ì¢‹ì€ PRì€ ì•„ì§ ë‚˜ì˜¤ì§€ ì•ŠìŒ)</li>\n<li>2 <code class=\"language-text\">PKI ì§€ì‹ í•„ìš”</code> : ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ë©´ ì•½ê°„ì˜ PKI ì§€ì‹ì´ í•„ìš”</li>\n<li>3 <code class=\"language-text\">ì¸í”„ë¼ ì„¤ì • í•„ìš”</code> : SSH ì¸ì¦ì„œëŠ” ìƒê°ë³´ë‹¤ ì–´ë µì§€ ì•Šì§€ë§Œ ë¨¼ì € ì¼ë¶€ êµ¬ì„±ì„ ìˆ˜í–‰í•´ì•¼ í•¨</li>\n</ul>\n<p><strong>ğŸŸ¡ ìˆœì„œ</strong> <br></p>\n<ul>\n<li>1 ssh-keygenìœ¼ë¡œ CAì¸ì¦ì„œ ìƒì„±<code class=\"language-text\">(ì¤‘ì•™ì„œë²„)</code></li>\n<li>2 sshd_config ì„¤ì • ë° í‚¤íŒŒì¼ ì „ì†¡<code class=\"language-text\">(ëª©ì ì§€ì„œë²„)</code></li>\n<li>3 ssh-keygenìœ¼ë¡œ signë°›ì„ í‚¤í˜ì–´ ìƒì„± <code class=\"language-text\">(ì¶œë°œì§€ì„œë²„)</code></li>\n<li>4 CAì¸ì¦ì„œë¡œ í‚¤í˜ì–´ sign<code class=\"language-text\">(ì¤‘ì•™ì„œë²„)</code></li>\n<li>5 signëœ í‚¤ë¡œ ëª©ì ì§€ ì„œë²„ì— ssh ì ‘ì†<code class=\"language-text\">(ì¶œë°œì§€ì„œë²„)</code></li>\n<li>6 ssh-cert ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</li>\n</ul>\n<hr>\n<h3 id=\"ï¸-1-ssh-keygenìœ¼ë¡œ-caì¸ì¦ì„œ-ìƒì„±ì¤‘ì•™ì„œë²„\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-ssh-keygen%EC%9C%BC%EB%A1%9C-ca%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%83%9D%EC%84%B1%EC%A4%91%EC%95%99%EC%84%9C%EB%B2%84\" aria-label=\"ï¸ 1 ssh keygenìœ¼ë¡œ caì¸ì¦ì„œ ìƒì„±ì¤‘ì•™ì„œë²„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 1. ssh-keygenìœ¼ë¡œ CAì¸ì¦ì„œ ìƒì„±(ì¤‘ì•™ì„œë²„)</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#passphraseëŠ” ì—†ì´ ìƒì„±í•œë‹¤</span>\nssh-keygen <span class=\"token parameter variable\">-f</span> client_ca\n<span class=\"token comment\"># client_ca, client_ca.pub íŒŒì¼ì´ ìƒì„±ëœë‹¤</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-2-sshd_config-ì„¤ì •-ë°-í‚¤íŒŒì¼-ì „ì†¡ëª©ì ì§€ì„œë²„\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-sshd_config-%EC%84%A4%EC%A0%95-%EB%B0%8F-%ED%82%A4%ED%8C%8C%EC%9D%BC-%EC%A0%84%EC%86%A1%EB%AA%A9%EC%A0%81%EC%A7%80%EC%84%9C%EB%B2%84\" aria-label=\"ï¸ 2 sshd_config ì„¤ì • ë° í‚¤íŒŒì¼ ì „ì†¡ëª©ì ì§€ì„œë²„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 2. sshd_config ì„¤ì • ë° í‚¤íŒŒì¼ ì „ì†¡(ëª©ì ì§€ì„œë²„)</h3>\n<blockquote>\n<p>/etc/ssh/sshd_conifg ì„¤ì • <br>\nì„¤ì • ì´í›„ sshd ì„œë¹„ìŠ¤ ì¬ì‹œì‘ í•„ìš”<br>\n<code class=\"language-text\">ì´ í‚¤ë¡œë¶€í„° ì‚¬ì¸ëœ ì¸ì¦ì„œë¡œ ì ‘ê·¼í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¼ë©´ SSH ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤</code>ë¼ëŠ” ì˜ë¯¸ì„ <br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vi</span> /etc/ssh/sshd_config\n<span class=\"token comment\"># ì¤‘ì•™ì„œë²„ì—ì„œ ìƒì„±í•œ client_ca.pub íŒŒì¼ì„ ëª©ì ì§€ ì„œë²„ë¡œ ê°€ì ¸ì™€ì„œ ì„¸íŒ…í•œë‹¤</span>\nTrustedUserCAKeys /etc/ssh/client_ca.pub\n</code></pre></div>\n<hr>\n<h3 id=\"ï¸-3-ssh-keygenìœ¼ë¡œ-signë°›ì„-í‚¤í˜ì–´-ìƒì„±-ì¶œë°œì§€ì„œë²„\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-ssh-keygen%EC%9C%BC%EB%A1%9C-sign%EB%B0%9B%EC%9D%84-%ED%82%A4%ED%8E%98%EC%96%B4-%EC%83%9D%EC%84%B1-%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%84%9C%EB%B2%84\" aria-label=\"ï¸ 3 ssh keygenìœ¼ë¡œ signë°›ì„ í‚¤í˜ì–´ ìƒì„± ì¶œë°œì§€ì„œë²„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 3. ssh-keygenìœ¼ë¡œ signë°›ì„ í‚¤í˜ì–´ ìƒì„± (ì¶œë°œì§€ì„œë²„)</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#passphraseëŠ” ì—†ì´ ìƒì„±í•œë‹¤</span>\nssh-keygen\n<span class=\"token comment\"># id_rsa, id_rsa.pub íŒŒì¼ì´ ìƒì„±ëœë‹¤</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-4-caì¸ì¦ì„œë¡œ-í‚¤í˜ì–´-signì¤‘ì•™ì„œë²„\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-4-ca%EC%9D%B8%EC%A6%9D%EC%84%9C%EB%A1%9C-%ED%82%A4%ED%8E%98%EC%96%B4-sign%EC%A4%91%EC%95%99%EC%84%9C%EB%B2%84\" aria-label=\"ï¸ 4 caì¸ì¦ì„œë¡œ í‚¤í˜ì–´ signì¤‘ì•™ì„œë²„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 4. CAì¸ì¦ì„œë¡œ í‚¤í˜ì–´ sign(ì¤‘ì•™ì„œë²„)</h3>\n<blockquote>\n<p>ì¶œë°œì§€ ì„œë²„ì—ì„œ id_rsa.pub íŒŒì¼ì„ ê°€ì ¸ì˜¨ë‹¤ <br>\nê¸°ì¡´ì— ë§Œë“  client_caì¸ì¦ì„œë¡œ signì„ í•œë‹¤ <br></p>\n<ul>\n<li>ì˜µì…˜ -n : ê³„ì •ëª… <br></li>\n<li>ì˜µì…˜ -V : ì‚¬ìš©ê¸°ê°„ <br></li>\n</ul>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ssh-keygen <span class=\"token parameter variable\">-s</span> client_ca <span class=\"token parameter variable\">-I</span> user_identifier <span class=\"token parameter variable\">-n</span> root <span class=\"token parameter variable\">-V</span> +5m id_rsa.pub\n<span class=\"token comment\">#  id_rsa-cert.pub íŒŒì¼ì´ ìƒì„±ëœë‹¤</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-5-signëœ-í‚¤ë¡œ-ëª©ì ì§€-ì„œë²„ì—-ssh-ì ‘ì†ì¶œë°œì§€ì„œë²„\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-5-sign%EB%90%9C-%ED%82%A4%EB%A1%9C-%EB%AA%A9%EC%A0%81%EC%A7%80-%EC%84%9C%EB%B2%84%EC%97%90-ssh-%EC%A0%91%EC%86%8D%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%84%9C%EB%B2%84\" aria-label=\"ï¸ 5 signëœ í‚¤ë¡œ ëª©ì ì§€ ì„œë²„ì— ssh ì ‘ì†ì¶œë°œì§€ì„œë²„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 5. signëœ í‚¤ë¡œ ëª©ì ì§€ ì„œë²„ì— ssh ì ‘ì†(ì¶œë°œì§€ì„œë²„)</h3>\n<blockquote>\n<p>ì¤‘ì•™ì„œë²„ì—ì„œ ë°œê¸‰í•œ id_rsa-cert.pubí‚¤ë¥¼ ~/.ssh/id_rsa-cert.pub ë¡œ ìœ„ì¹˜ì‹œí‚¨ë‹¤<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> ê³„ì •ëª…@ëª©ì ì§€ì„œë²„\n<span class=\"token comment\">#ì ‘ì†ì„±ê³µ</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-6-ssh-cert-ì¤‘ì•™ê´€ë¦¬-í”Œë¡œìš°\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-6-ssh-cert-%EC%A4%91%EC%95%99%EA%B4%80%EB%A6%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\" aria-label=\"ï¸ 6 ssh cert ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 6. ssh-cert ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</h3>\n<blockquote>\n<p>ë³´ì•ˆ ë‹´ë‹¹ìëŠ” ëŠ” ë¯¸ë¦¬ ssh-cert ì¤‘ì•™ê´€ë¦¬ ì„œë²„ì— <code class=\"language-text\">CAì¸ì¦ì„œ</code>ë¥¼ ìƒì„±í•´ë‘”ë‹¤ <br>\nì¸í”„ë¼ ë‹´ë‹¹ìëŠ” ë¯¸ë¦¬ ëª¨ë“  ì„œë²„ì— <code class=\"language-text\">CAí‚¤</code>, <code class=\"language-text\">TrustedUserCAKeys</code> ì„¸íŒ…í•´ ë…¼ë‹¤<br>\nì‚¬ìš©ìëŠ” sshì ‘ì†ì´ í•„ìš”í• ê²½ìš° <code class=\"language-text\">í‚¤í˜ì–´</code>ë¥¼ ìƒì„±í•´ <code class=\"language-text\">signingìš”ì²­</code>ì„ í•˜ê³  sshì ‘ì†ì„ í•œë‹¤<br></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJklEQVQ4y5WSTW8SURSG+dtuTLrrUreaaFzUmmhcqKuakNrWWhNrm1ILDDCAQOcLZphvmK/H3EuGYjuN9SQnd+C+ec57zrk1KiJJEmzb4b4Q97OZvf5dFMX6u5ZlGcvlUorEuVgsUHoj9upHmJYlRVEU4XmePKGg2x9TPzhhNJ7cBfq+z/X1NZZloes6k8mY+tEZj7a2+Xl+LtQYhiE1wnUcRxyeNNjafsLh8TcJyfP8BljV0sVVl2cvd9B0vbJldajx/NUu3Z66BgqXImvlh8iyUlHcVBT/bWbZXpIs77S7drgJFSFmGccLigp3q8IFYRiui4g9iJQO7wOKLO9Mw2DQ72NZZoklCALm87mcrWmacs5isbXblkWIaqKlmZ8xtBJ6WoQyDuQ5nKaYbio3Xrr7a4bls7BtW1YU6dg2fhChmjltLefXMOC8M+VqFKPoOR09xfPDyoVJoHh7juPgui6u6zG1LOauj2okNCdLvp4qvH7zlv3vTbomtCcRcy/g9rjWW66KMIpp/g5oDAI+fv7B46cv2D1ooWgZzVFIEC0etuWVoCDLC1Qzo2sUXA5DduoN3h+1OW1POetMSdL8fuDmkygFaZbLlltaxkCL6Q0cmqOIi77H5cBlmWT/Bm4KBLCnJwxmsHfS5sOXT7SGDh1j5fxBDm8Du3qCauTsKy7vTlUaik5Ly+loyf8BV5oCy03pGQnjaYY2y+mbiRyDMU/lfVEB/AMces9LEraQVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ì‚¬ì§„1\"\n        title=\"ì‚¬ì§„1\"\n        src=\"/static/a6923deb2064110af7a86628da5c0531/37523/1.png\"\n        srcset=\"/static/a6923deb2064110af7a86628da5c0531/e9ff0/1.png 180w,\n/static/a6923deb2064110af7a86628da5c0531/f21e7/1.png 360w,\n/static/a6923deb2064110af7a86628da5c0531/37523/1.png 720w,\n/static/a6923deb2064110af7a86628da5c0531/302a4/1.png 1080w,\n/static/a6923deb2064110af7a86628da5c0531/07a9c/1.png 1440w,\n/static/a6923deb2064110af7a86628da5c0531/bd9eb/1.png 1442w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p><a href=\"https://www.devseccon.com/blog/3-reasons-to-use-ssh-certificates-instead-of-ssh-keys-secadvent-day-22\">https://www.devseccon.com/blog/3-reasons-to-use-ssh-certificates-instead-of-ssh-keys-secadvent-day-22</a><br>\n<a href=\"https://blog.naver.com/alice_k106/221803861645\">https://blog.naver.com/alice_k106/221803861645</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-ssh-keygen%EC%9C%BC%EB%A1%9C-ca%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%83%9D%EC%84%B1%EC%A4%91%EC%95%99%EC%84%9C%EB%B2%84\">âŒ¨ï¸ 1. ssh-keygenìœ¼ë¡œ CAì¸ì¦ì„œ ìƒì„±(ì¤‘ì•™ì„œë²„)</a></li>\n<li><a href=\"#%EF%B8%8F-2-sshd_config-%EC%84%A4%EC%A0%95-%EB%B0%8F-%ED%82%A4%ED%8C%8C%EC%9D%BC-%EC%A0%84%EC%86%A1%EB%AA%A9%EC%A0%81%EC%A7%80%EC%84%9C%EB%B2%84\">âŒ¨ï¸ 2. sshd_config ì„¤ì • ë° í‚¤íŒŒì¼ ì „ì†¡(ëª©ì ì§€ì„œë²„)</a></li>\n<li><a href=\"#%EF%B8%8F-3-ssh-keygen%EC%9C%BC%EB%A1%9C-sign%EB%B0%9B%EC%9D%84-%ED%82%A4%ED%8E%98%EC%96%B4-%EC%83%9D%EC%84%B1-%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%84%9C%EB%B2%84\">âŒ¨ï¸ 3. ssh-keygenìœ¼ë¡œ signë°›ì„ í‚¤í˜ì–´ ìƒì„± (ì¶œë°œì§€ì„œë²„)</a></li>\n<li><a href=\"#%EF%B8%8F-4-ca%EC%9D%B8%EC%A6%9D%EC%84%9C%EB%A1%9C-%ED%82%A4%ED%8E%98%EC%96%B4-sign%EC%A4%91%EC%95%99%EC%84%9C%EB%B2%84\">âŒ¨ï¸ 4. CAì¸ì¦ì„œë¡œ í‚¤í˜ì–´ sign(ì¤‘ì•™ì„œë²„)</a></li>\n<li><a href=\"#%EF%B8%8F-5-sign%EB%90%9C-%ED%82%A4%EB%A1%9C-%EB%AA%A9%EC%A0%81%EC%A7%80-%EC%84%9C%EB%B2%84%EC%97%90-ssh-%EC%A0%91%EC%86%8D%EC%B6%9C%EB%B0%9C%EC%A7%80%EC%84%9C%EB%B2%84\">âŒ¨ï¸ 5. signëœ í‚¤ë¡œ ëª©ì ì§€ ì„œë²„ì— ssh ì ‘ì†(ì¶œë°œì§€ì„œë²„)</a></li>\n<li><a href=\"#%EF%B8%8F-6-ssh-cert-%EC%A4%91%EC%95%99%EA%B4%80%EB%A6%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\">âŒ¨ï¸ 6. ssh-cert ì¤‘ì•™ê´€ë¦¬ í”Œë¡œìš°</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 06, 2023","title":"[ë³´ì•ˆ] SSH ì ‘ê·¼ ì¤‘ì•™ê´€ë¦¬ - SSH-Cert ê´€ë¦¬ (3)","categories":"ë³´ì•ˆ","author":"sb","emoji":"ğŸ”"},"fields":{"slug":"/5-security-ssh-3/"}},"site":{"siteMetadata":{"siteUrl":"https://sbbs.me","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/5-security-ssh-2/","nextSlug":"/5-security-ssh-1/","prevSlug":"/5-security-ssh-3/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}