{"componentChunkName":"component---src-templates-blog-template-js","path":"/3-blog-ga-0/","result":{"data":{"cur":{"id":"23b9f688-5d5f-5bfd-b907-ed353201d27c","html":"<h2 id=\"-소개\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 소개</h2>\n<p>Gastby로 만든 Gitlab 블로그에 구글 애드센스를 붙여보자🙌</p>\n<hr>\n<h3 id=\"️-1-google-adsense-가입하기\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-google-adsense-%EA%B0%80%EC%9E%85%ED%95%98%EA%B8%B0\" aria-label=\"️ 1 google adsense 가입하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 1. Google AdSense 가입하기</h3>\n<blockquote>\n<p><a href=\"https://www.google.com/adsense\">https://www.google.com/adsense</a><br>\n사이트 <code class=\"language-text\">&lt;head></code> <code class=\"language-text\">&lt;/head></code> 사이에 애드센스 스크립트를 넣어야 검토가 완료됩니다 <br>\n사이트 검토는 최대 2주정도 소요 됨</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwklEQVQoz52R6wrDIAyFff8H7AvsZ92qdt6i5oxYCl0vdOzAwUCC+ZKoedaYjIYxDtZaEBEKFWzFzLcWDcMA9dCE0VWMhqBtQaaKlBO89/AhoJSy+/S6Qc4ZSr8cqDBqQ3djxmQNtH52O+cQY0QIob9r7H1AJsJeyvs3ai0LNjNaa4hxIRQ6saxh8TamnpP6WldXKEmklHpyRZci8bqbK52NrV7T1Hf1XYS/pYROaPYdAf7pugdCY22/zvFD3I58RvgBq093Cq4IT2YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"사진1\"\n        title=\"사진1\"\n        src=\"/static/def22d41c5204e94ec5470932f04e7ff/37523/2.png\"\n        srcset=\"/static/def22d41c5204e94ec5470932f04e7ff/e9ff0/2.png 180w,\n/static/def22d41c5204e94ec5470932f04e7ff/f21e7/2.png 360w,\n/static/def22d41c5204e94ec5470932f04e7ff/37523/2.png 720w,\n/static/def22d41c5204e94ec5470932f04e7ff/302a4/2.png 1080w,\n/static/def22d41c5204e94ec5470932f04e7ff/8c381/2.png 1267w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"️-2-gastby에-adsense-plugin-설치-head에-자동태그삽입\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-gastby%EC%97%90-adsense-plugin-%EC%84%A4%EC%B9%98-head%EC%97%90-%EC%9E%90%EB%8F%99%ED%83%9C%EA%B7%B8%EC%82%BD%EC%9E%85\" aria-label=\"️ 2 gastby에 adsense plugin 설치 head에 자동태그삽입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 2. Gastby에 AdSense plugin 설치 (<head>에 자동태그삽입)</h3>\n<blockquote>\n<p>플러그인을 설치하면 <code class=\"language-text\">&lt;head></code> 사이에 자동으로 구글애드센스 코드를 삽입해줌\n플러그인 설치</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> gatsby-plugin-google-adsense</code></pre></div>\n<blockquote>\n<p>gatsby-config.js 에 설정 추가<br>\n본인 퍼블리쉬ID는 구글애드 계정 -> 설정 -> 계정정보 에서 pub-숫자로 확인할수있음</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-google-adsense</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">publisherId</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ca-pub-본인 publishedID</span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<hr>\n<h3 id=\"️-3-gastby에-adstxt-파일-만들기\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-gastby%EC%97%90-adstxt-%ED%8C%8C%EC%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"️ 3 gastby에 adstxt 파일 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 3. Gastby에 ads.txt 파일 만들기</h3>\n<blockquote>\n<p>Gastby 프로젝트 디렉터리에 <code class=\"language-text\">/static</code> 디렉토리는 빌드후 <code class=\"language-text\">/public</code> 디렉토리에 파일을 생성해 줌<br>\n본인 퍼블리쉬ID는 구글애드 계정 -> 설정 -> 계정정보 에서 pub-숫자로 확인할수있음</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">google.com, pub-본인 publishedID, DIRECT, f08c47fec0942fa0</code></pre></div>\n<hr>\n<h3 id=\"참고사이트\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"참고사이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고사이트</h3>\n<blockquote>\n<p><a href=\"https://developers.google.com/adsense/platforms/transparent/ads-txt?hl=ko\">https://developers.google.com/adsense/platforms/transparent/ads-txt?hl=ko</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">👋 소개</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-google-adsense-%EA%B0%80%EC%9E%85%ED%95%98%EA%B8%B0\">⌨️ 1. Google AdSense 가입하기</a></li>\n<li><a href=\"#%EF%B8%8F-2-gastby%EC%97%90-adsense-plugin-%EC%84%A4%EC%B9%98-head%EC%97%90-%EC%9E%90%EB%8F%99%ED%83%9C%EA%B7%B8%EC%82%BD%EC%9E%85\">⌨️ 2. Gastby에 AdSense plugin 설치 (<head>에 자동태그삽입)</a></li>\n<li><a href=\"#%EF%B8%8F-3-gastby%EC%97%90-adstxt-%ED%8C%8C%EC%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0\">⌨️ 3. Gastby에 ads.txt 파일 만들기</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">참고사이트</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"👋 소개 Gastby로 만든 Gitlab 블로그에 구글 애드센스를 붙여보자🙌 ⌨️ 1. Google AdSense 가입하기 https://www.google.com/adsense\n사이트   사이에 애드센스 스크립트를 넣어야 검토가 완료됩니다 \n사이트 검토는 최대 2주정도 소요 됨  ⌨️ 2. Gastby에 AdSense plugin 설치 (에 자동태그삽입) 플러그인을 설치하면  사이에 자동으로 구글애드센스 코드를 삽입해줌\n플러그인 설치 gatsby-config.js 에 설정 추가\n본인 퍼블리쉬ID는 구글애드 계정 -> 설정 -> 계정정보 에서 pub-숫자로 확인할수있음 ⌨️ 3. Gastby에 ads.txt 파일 만들기 Gastby 프로젝트 디렉터리에  디렉토리는 빌드후  디렉토리에 파일을 생성해 줌\n본인 퍼블리쉬ID는 구글애드 계정 -> 설정 -> 계정정보 에서 pub-숫자로 확인할수있음 참고사이트 https://developers.google.com/adsense/platforms/…","frontmatter":{"date":"May 28, 2023","title":"[블로그] 구글 광고 연동 with Gastby - Google Adsense(1)","categories":"블로그","author":"sb","emoji":"📘"},"fields":{"slug":"/3-blog-ga-0/"}},"next":{"id":"90202e69-0131-5f1c-ac75-d973f11a02ff","html":"<h2 id=\"-소개\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 소개</h2>\n<p>websocket을 사용하여 Bot을 만들어보자🙌</p>\n<hr>\n<h3 id=\"️-1-mattermost-bot-만들기\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-mattermost-bot-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"️ 1 mattermost bot 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 1. Mattermost Bot 만들기</h3>\n<blockquote>\n<p>메뉴순서 : 더보기 -> 통합(integration) -> Bot Account -> 봇 계정 만들기</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQoz41Sv0sDMRjtP+vuIHZwloIILiI6uPsD3ezi4KQOHURwsQhtwfbUKmfvkktyl9yTF8yR1ioGHsnd930v78v3WkUhIUSOyiiURkEpBecc6rr24LksS4RlrfX/AkIeUVUVWhe9KXa7E+xfTtF/nkErAWtdQ8AkkgyGIyTJi48pbeDcNxHgdy5jDFqPE4Xrvsbd0OD9s0Ahpb8ZUWKWZWivrWJnu4N4hXjY2Unr6mGGo5sUJ7cpBkkOrSTsAmFlHdqbB+jsneLp1eJ+pJGkVZMzRyiFgIggfyisoasaW90cG2cZ1o8/sHL4hvOe8Dmh9YZQCA5FeqJFwkDKd3RGAk5TL0fj4Za1HCtbppDgUKQs/DCMKWHKyl+y9A1JEPCXQv7XWvsiIljm34Sxv/hNfxK0RuzFeCjeNnG7vxGSIE1Tj6IovFLui/byhLGygJAQt0x1weQEi/M8n/NlMxSSMEgDEwyEQqohGeM8h3dk3WQ8bvLCs3wB8YmgDCg4iBoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"사진1\"\n        title=\"사진1\"\n        src=\"/static/8f0e9801e28ebc4ec799de031fc3373f/37523/1.png\"\n        srcset=\"/static/8f0e9801e28ebc4ec799de031fc3373f/e9ff0/1.png 180w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/f21e7/1.png 360w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/37523/1.png 720w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/302a4/1.png 1080w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/07a9c/1.png 1440w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/1105b/1.png 2940w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"️-2-websocket-설정\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-websocket-%EC%84%A4%EC%A0%95\" aria-label=\"️ 2 websocket 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 2. Websocket 설정</h3>\n<blockquote>\n<ol>\n<li>메타모스트 웹사이트에 로그인합니다.</li>\n<li>화면 상단의 ‘Tools’ 메뉴를 클릭합니다.</li>\n<li>‘Options’를 선택합니다.</li>\n<li>왼쪽 메뉴에서 ‘Server’를 선택합니다.</li>\n<li>‘Enable WebSocket server’ 옵션을 활성화합니다.</li>\n<li>웹소켓 서버 주소를 입력합니다. (예: wss://server.example.com)</li>\n<li>‘Save’ 버튼을 클릭합니다.</li>\n</ol>\n</blockquote>\n<hr>\n<h3 id=\"️-3-봇-초기-설정-코드\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-%EB%B4%87-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95-%EC%BD%94%EB%93%9C\" aria-label=\"️ 3 봇 초기 설정 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 3. 봇 초기 설정 코드</h3>\n<blockquote>\n<p>먼저 관리자 도구 -> 사용자 -> 봇계정의 이메일과 패스워드를 세팅해주세요<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">(</span>\n\tSAMPLE_NAME       <span class=\"token operator\">=</span> <span class=\"token string\">\"메타봇\"</span>\n\tMATTERMOST_ADDR   <span class=\"token operator\">=</span> <span class=\"token string\">\"http://메타모스트 url\"</span>\n\tMATTERMOST_WSADDR <span class=\"token operator\">=</span> <span class=\"token string\">\"ws://메타모스트 url\"</span>\n\n\tUSER_EMAIL    <span class=\"token operator\">=</span> <span class=\"token string\">\"봇계정@이메일\"</span>\n\tUSER_PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"패스워드 \"</span>\n\tUSER_NAME     <span class=\"token operator\">=</span> <span class=\"token string\">\"BOT\"</span>\n\tUSER_FIRST    <span class=\"token operator\">=</span> <span class=\"token string\">\"메타모스트\"</span>\n\tUSER_LAST     <span class=\"token operator\">=</span> <span class=\"token string\">\"봇\"</span>\n\n\tTEAM_NAME         <span class=\"token operator\">=</span> <span class=\"token string\">\"metamon\"</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h3 id=\"️-4-응답-핸들러-코드\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-4-%EC%9D%91%EB%8B%B5-%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%BD%94%EB%93%9C\" aria-label=\"️ 4 응답 핸들러 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 4. 응답 핸들러 코드</h3>\n<blockquote>\n<p>봇이 멤버로 들어가 있는 채널만 메세지가 수신됩니다<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span>\t<span class=\"token comment\">//클라이언트 연결</span>\n\t\twebSocketClient<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewWebSocketClient4</span><span class=\"token punctuation\">(</span>MATTERMOST_WSADDR<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">.</span>AuthToken<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to connect to the web socket\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to WS\"</span><span class=\"token punctuation\">)</span>\n\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//웹소켓 실시간 listen</span>\n\n\t\t<span class=\"token keyword\">for</span> resp <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> webSocketClient<span class=\"token punctuation\">.</span>EventChannel <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 채널의 이벤트를 for문을 통해 수신</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"️-5-채널-매세지-수신-및-메시지-전송\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-5-%EC%B1%84%EB%84%90-%EB%A7%A4%EC%84%B8%EC%A7%80-%EC%88%98%EC%8B%A0-%EB%B0%8F-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EC%86%A1\" aria-label=\"️ 5 채널 매세지 수신 및 메시지 전송 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 5. 채널 매세지 수신 및 메시지 전송</h3>\n<blockquote>\n<p>봇이 추가된 채널의 메세지를 정규표현식으로 분리하고 특정 단어에 따라 메세지를 응답하는 봇을 만든다<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">EventType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> model<span class=\"token punctuation\">.</span>WEBSOCKET_EVENT_POSTED <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\tpost <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">PostFromJson</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">.</span><span class=\"token function\">NewReader</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">GetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"메세지수신 / 채널ID:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">,</span> <span class=\"token string\">\" / 메세지:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> post <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> post<span class=\"token punctuation\">.</span>UserId <span class=\"token operator\">==</span> botUser<span class=\"token punctuation\">.</span>Id <span class=\"token punctuation\">{</span> <span class=\"token comment\">//메세지의 userid가 봇의id와 같다면 무시하도록 설정</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!날씨`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"오늘의 날씨는 구름많음 입니다\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!온도`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"현재 온도는 23도 입니다\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"️-6-전체-코드\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-6-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\" aria-label=\"️ 6 전체 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 6. 전체 코드</h3>\n<blockquote>\n<p>전체 코드 입니다 아래 펼치기를 눌러주세요<br></p>\n</blockquote>\n<details markdown=\"1\">\n<summary>접기/펼치기</summary>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"os\"</span>\n\t<span class=\"token string\">\"os/signal\"</span>\n\t<span class=\"token string\">\"regexp\"</span>\n\t<span class=\"token string\">\"strings\"</span>\n\n\t<span class=\"token boolean\">_</span> <span class=\"token string\">\"github.com/go-sql-driver/mysql\"</span>\n\n\t<span class=\"token string\">\"github.com/mattermost/mattermost-server/v5/model\"</span>\n\t<span class=\"token boolean\">_</span> <span class=\"token string\">\"github.com/mattn/go-sqlite3\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">(</span>\n\t\tSAMPLE_NAME       <span class=\"token operator\">=</span> <span class=\"token string\">\"메타봇\"</span>\n\tMATTERMOST_ADDR   <span class=\"token operator\">=</span> <span class=\"token string\">\"http://메타모스트 url\"</span>\n\tMATTERMOST_WSADDR <span class=\"token operator\">=</span> <span class=\"token string\">\"ws://메타모스트 url\"</span>\n\n\tUSER_EMAIL    <span class=\"token operator\">=</span> <span class=\"token string\">\"봇계정@이메일\"</span>\n\tUSER_PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"패스워드 \"</span>\n\tUSER_NAME     <span class=\"token operator\">=</span> <span class=\"token string\">\"BOT\"</span>\n\tUSER_FIRST    <span class=\"token operator\">=</span> <span class=\"token string\">\"메타모스트\"</span>\n\tUSER_LAST     <span class=\"token operator\">=</span> <span class=\"token string\">\"봇\"</span>\n\n\tTEAM_NAME         <span class=\"token operator\">=</span> <span class=\"token string\">\"metamon\"</span>\n\tCHANNEL_LOG_NAME  <span class=\"token operator\">=</span> <span class=\"token string\">\"채널id1 - 채널에서 view info를 설정하면 channel id를 확인할수 있음\"</span>\n\tCHANNEL_LOG_NAME2 <span class=\"token operator\">=</span> <span class=\"token string\">\"채널id2 - 채널에서 view info를 설정하면 channel id를 확인할수 있음\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> client <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Client4\n<span class=\"token keyword\">var</span> webSocketClient <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketClient\n<span class=\"token keyword\">var</span> files <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>FileUploadResponse\n<span class=\"token keyword\">var</span> botUser <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>User\n<span class=\"token keyword\">var</span> botTeam <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Team\n<span class=\"token keyword\">var</span> debuggingChannel <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Channel\n\n<span class=\"token comment\">// Documentation for the Go driver can be found</span>\n<span class=\"token comment\">// at https://godoc.org/github.com/mattermost/platform/model#Client</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span>SAMPLE_NAME<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">SetupGracefulShutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\tclient <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewAPIv4Client</span><span class=\"token punctuation\">(</span>MATTERMOST_ADDR<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">MakeSureServerIsRunning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">LoginAsTheBotUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">UpdateTheBotUserIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">FindBotTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":smile:**`\"</span><span class=\"token operator\">+</span>SAMPLE_NAME<span class=\"token operator\">+</span><span class=\"token string\">\"시작`**:smile:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CHANNEL_LOG_NAME<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\">// Lets start listening to some channels via the websocket!</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span>\n\t\twebSocketClient<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewWebSocketClient4</span><span class=\"token punctuation\">(</span>MATTERMOST_WSADDR<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">.</span>AuthToken<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to connect to the web socket\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to WS\"</span><span class=\"token punctuation\">)</span>\n\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token keyword\">for</span> resp <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> webSocketClient<span class=\"token punctuation\">.</span>EventChannel <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">MakeSureServerIsRunning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> props<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetOldClientConfig</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There was a problem pinging the Mattermost server.  Are you sure it's running?\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server detected and is running version \"</span> <span class=\"token operator\">+</span> props<span class=\"token punctuation\">[</span><span class=\"token string\">\"Version\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">LoginAsTheBotUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> user<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">Login</span><span class=\"token punctuation\">(</span>USER_EMAIL<span class=\"token punctuation\">,</span> USER_PASSWORD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There was a problem logging into the Mattermost server.  Are you sure ran the setup steps from the README.md?\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tbotUser <span class=\"token operator\">=</span> user\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">UpdateTheBotUserIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> botUser<span class=\"token punctuation\">.</span>FirstName <span class=\"token operator\">!=</span> USER_FIRST <span class=\"token operator\">||</span> botUser<span class=\"token punctuation\">.</span>LastName <span class=\"token operator\">!=</span> USER_LAST <span class=\"token operator\">||</span> botUser<span class=\"token punctuation\">.</span>Username <span class=\"token operator\">!=</span> USER_NAME <span class=\"token punctuation\">{</span>\n\t\tbotUser<span class=\"token punctuation\">.</span>FirstName <span class=\"token operator\">=</span> USER_FIRST\n\t\tbotUser<span class=\"token punctuation\">.</span>LastName <span class=\"token operator\">=</span> USER_LAST\n\t\tbotUser<span class=\"token punctuation\">.</span>Username <span class=\"token operator\">=</span> USER_NAME\n\n\t\t<span class=\"token keyword\">if</span> user<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">UpdateUser</span><span class=\"token punctuation\">(</span>botUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to update the Sample Bot user\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\tbotUser <span class=\"token operator\">=</span> user\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Looks like this might be the first run so we've updated the bots account settings\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">FindBotTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> team<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetTeamByName</span><span class=\"token punctuation\">(</span>TEAM_NAME<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to get the initial load\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"or we do not appear to be a member of the team '\"</span> <span class=\"token operator\">+</span> TEAM_NAME <span class=\"token operator\">+</span> <span class=\"token string\">\"'\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tbotTeam <span class=\"token operator\">=</span> team\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">CreateBotDebuggingChannelIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> rchannel<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetChannelByName</span><span class=\"token punctuation\">(</span>CHANNEL_LOG_NAME<span class=\"token punctuation\">,</span> botTeam<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to get the channels\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tdebuggingChannel <span class=\"token operator\">=</span> rchannel\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span>msg <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> replyToId <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> channelid <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tpost <span class=\"token operator\">:=</span> <span class=\"token operator\">&amp;</span>model<span class=\"token punctuation\">.</span>Post<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\tpost<span class=\"token punctuation\">.</span>ChannelId <span class=\"token operator\">=</span> channelid\n\tpost<span class=\"token punctuation\">.</span>Message <span class=\"token operator\">=</span> msg\n\n\t<span class=\"token comment\">//post.RootId = replyToId</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">CreatePost</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to send a message to the logging channel\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">defer</span> <span class=\"token keyword\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">recover</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">EventType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> model<span class=\"token punctuation\">.</span>WEBSOCKET_EVENT_POSTED <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tpost <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">PostFromJson</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">.</span><span class=\"token function\">NewReader</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">GetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"메세지수신 / 채널ID:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">,</span> <span class=\"token string\">\" / 메세지:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> post <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> post<span class=\"token punctuation\">.</span>UserId <span class=\"token operator\">==</span> botUser<span class=\"token punctuation\">.</span>Id <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!날씨`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"현재 날씨는 23도입니다\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>AppError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\tError Details:\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>DetailedError<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">SetupGracefulShutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tc <span class=\"token operator\">:=</span> <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">chan</span> os<span class=\"token punctuation\">.</span>Signal<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\tsignal<span class=\"token punctuation\">.</span><span class=\"token function\">Notify</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>Interrupt<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">go</span> <span class=\"token keyword\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">range</span> c <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span> webSocketClient <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":disappointed_relieved:**`\"</span><span class=\"token operator\">+</span>SAMPLE_NAME<span class=\"token operator\">+</span><span class=\"token string\">\"정지`**:disappointed_relieved:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CHANNEL_LOG_NAME<span class=\"token punctuation\">)</span>\n\t\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n</details>\n<hr>\n<h3 id=\"참고사이트\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"참고사이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고사이트</h3>\n<blockquote>\n<p><a href=\"https://github.com/mattermost/mattermost-bot-sample-golang/blob/master/bot_sample.go\">https://github.com/mattermost/mattermost-bot-sample-golang/blob/master/bot_sample.go</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">👋 소개</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-mattermost-bot-%EB%A7%8C%EB%93%A4%EA%B8%B0\">⌨️ 1. Mattermost Bot 만들기</a></li>\n<li><a href=\"#%EF%B8%8F-2-websocket-%EC%84%A4%EC%A0%95\">⌨️ 2. Websocket 설정</a></li>\n<li><a href=\"#%EF%B8%8F-3-%EB%B4%87-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95-%EC%BD%94%EB%93%9C\">⌨️ 3. 봇 초기 설정 코드</a></li>\n<li><a href=\"#%EF%B8%8F-4-%EC%9D%91%EB%8B%B5-%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%BD%94%EB%93%9C\">⌨️ 4. 응답 핸들러 코드</a></li>\n<li><a href=\"#%EF%B8%8F-5-%EC%B1%84%EB%84%90-%EB%A7%A4%EC%84%B8%EC%A7%80-%EC%88%98%EC%8B%A0-%EB%B0%8F-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EC%86%A1\">⌨️ 5. 채널 매세지 수신 및 메시지 전송</a></li>\n<li><a href=\"#%EF%B8%8F-6-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\">⌨️ 6. 전체 코드</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">참고사이트</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 27, 2023","title":"[매터모스트] mattermost BOT만들기 with Golang - WebSocket 연동(4)","categories":"BOT","author":"sb","emoji":"🤖"},"fields":{"slug":"/2-bot-mattermost-4/"}},"prev":{"id":"ca1c91bc-f75e-51aa-8690-b537ec896cab","html":"<h2 id=\"-소개\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 소개</h2>\n<p>Gastby로 만든 Gitlab 블로그에 구글 애널리틱스를 붙여보자🙌</p>\n<hr>\n<h3 id=\"️-1-google-analytics-가입하기\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-google-analytics-%EA%B0%80%EC%9E%85%ED%95%98%EA%B8%B0\" aria-label=\"️ 1 google analytics 가입하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 1. Google Analytics 가입하기</h3>\n<blockquote>\n<p><a href=\"https://analytics.google.com/\">https://analytics.google.com/</a><br>\n사이트 <code class=\"language-text\">&lt;head></code> <code class=\"language-text\">&lt;/head></code> 사이에 애널리틱스를 스크립트를 넣어야 검토가 완료됩니다 <br>\n헤드에 스크립트만 잘들어가면 바로 구글 애널리틱스에 데이터가 수짐됨</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVQ4y31UyW7bMBTU//9Plkt6TpHk3CI2kM1yYkuWRHFfp3iPkoEGbgUMKFLiW2aGbMQsceh6HI4dlDZQxlbQ+zKX2lQozePf/1jMUmOYBGal0VjnYKyFUhohRsSUGKUAKReEEPH9oTX6N+fCcxpojRI0Uirsdi1SSvxxGAa8vLzi6+sL8zzz2vPzM66vb/Dj7g5vb6+8Rvvu73/i9vYGV1dX2G63CDGhsdbBOYe4VEcVa25PceWlFLy9v+Px6QkPD49o2xZlqZKSbjZbPG826PsTjHNoJjHjNIwwzjMv2lgY6xjaOm7Dh8htEfzSGv3nAhWREVKG9QGzVGiUcZDaQmvNVRJ3xE0uFVQhzan6leOUMqOuJeQUgZIqhy5kaBvQ7j8xDCOEEMzdJASD5tMkOCHxTEnXkQvIEb1MaMeEEByatGTZHQROo+SNSikGvxNkXbfWMr/GGJ7TaGh0ES6COW8oGFDQDhEvuxOOwwG/2w12/Qm/Pj6g5hkh479PTglaySqK8wHeOfSDgJAaxhpIozAbj1lbxBCQUuWxlMvIObPqmirUxnBb0zgyd2Qh7wMmnWFDNe4qzBkXghJ1pHzjQ2BuyFP7/SeLYH2EMAUhlQsNFsrw74BkZAp47DoO2rZ7VpesRDagb6sI2noMKsH6zEHzpYB0oMnctNksRq7Q9TJYMPNoIJTlZKvxzzC2Xg7k7mPXY5wESCBSnQz8HeS5EAKIIuLYXQDdROeWD8cjG7u2aPlMO4aFcQGjLvCxnHlcW+WjRdbJeRHFV1G6rkfXV9BVRqDAq8lnRfegYw61yyglc0ASjuwW48IhbSLCqTop5bm1FXQZWF/PL/tt8WQtNCGKA9z4iRQXHzLhUjGHwzixQHSL00hqD0LjMDquzjnPNNgFdNSMmiqsY/H+AFfGwLRSW/G3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"사진1\"\n        title=\"사진1\"\n        src=\"/static/b6f1043374ab683ed1bf818eb8be4b91/37523/2.png\"\n        srcset=\"/static/b6f1043374ab683ed1bf818eb8be4b91/e9ff0/2.png 180w,\n/static/b6f1043374ab683ed1bf818eb8be4b91/f21e7/2.png 360w,\n/static/b6f1043374ab683ed1bf818eb8be4b91/37523/2.png 720w,\n/static/b6f1043374ab683ed1bf818eb8be4b91/6da96/2.png 922w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"️-2-gastby에-google-analytics-plugin-설치-head에-자동태그삽입\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-gastby%EC%97%90-google-analytics-plugin-%EC%84%A4%EC%B9%98-head%EC%97%90-%EC%9E%90%EB%8F%99%ED%83%9C%EA%B7%B8%EC%82%BD%EC%9E%85\" aria-label=\"️ 2 gastby에 google analytics plugin 설치 head에 자동태그삽입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 2. Gastby에 Google Analytics plugin 설치 (<head>에 자동태그삽입)</h3>\n<blockquote>\n<p>플러그인을 설치하면 <code class=\"language-text\">&lt;head></code> 사이에 자동으로 구글애널리틱스 코드를 삽입해줌<br>\n플러그인 설치 신규로 구글에널리틱스를 신청하면 gatsby-plugin-gtag가 아닌 <br>\ngatsby-plugin-gtag를 써야함 (버전이 다름)</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-plugin-gtag</code></pre></div>\n<blockquote>\n<p>gatsby-config.js 에 설정 추가<br>\n본인 trackingId 에널리틱스 홈-> G-로 시작하는 영문 값이 있음</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-gtag</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">trackingId</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">G-본인 trackingId</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">head</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<hr>\n<h3 id=\"️-3-google-analytics-데이터-수집-확인\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-google-analytics-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%88%98%EC%A7%91-%ED%99%95%EC%9D%B8\" aria-label=\"️ 3 google analytics 데이터 수집 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⌨️ 3. Google Analytics 데이터 수집 확인</h3>\n<blockquote>\n<p>Google Analytics 홈을 보면 사용자 1이 증가됨을 확인할 수 있음<br></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQoz41SCW7EMAj0/x/ajdqNkqzjmNNTYSdbteqFNAIDHoMhHSSYs4BFwSwQVbAIJM4ybDXrZ2LpObwsoPkOXteeP2Lc4ykXQj4UqopSCkJCuztqrbjdpq6BBjKFbhvK9ALeM+x1AszgrUGUoWpIQRTJrX0PM+sIO0RFUO9v8McGlPz0VwGINQgN4fqJ8JLnA+6whgEA5sM/rYpCJ+F55R+IDh3z8sCaCVUaDnbs1VDq+P8kamBtIPE/EdXE38YdNYe3UWHoaCaGk4gYtVIPXPDQ5p/sizSIvkrkqLeTsK/CmNBv2Kt20LlaF2KoB33E3gGVrXWVK7r9ggAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"사진1\"\n        title=\"사진1\"\n        src=\"/static/e84e09b798dd81dcd5b6c6f8d1bc44fc/37523/1.png\"\n        srcset=\"/static/e84e09b798dd81dcd5b6c6f8d1bc44fc/e9ff0/1.png 180w,\n/static/e84e09b798dd81dcd5b6c6f8d1bc44fc/f21e7/1.png 360w,\n/static/e84e09b798dd81dcd5b6c6f8d1bc44fc/37523/1.png 720w,\n/static/e84e09b798dd81dcd5b6c6f8d1bc44fc/302a4/1.png 1080w,\n/static/e84e09b798dd81dcd5b6c6f8d1bc44fc/cdef6/1.png 1163w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"참고사이트\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"참고사이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고사이트</h3>\n<blockquote>\n<p><a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-gtag/\">https://www.gatsbyjs.com/plugins/gatsby-plugin-gtag/</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">👋 소개</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-google-analytics-%EA%B0%80%EC%9E%85%ED%95%98%EA%B8%B0\">⌨️ 1. Google Analytics 가입하기</a></li>\n<li><a href=\"#%EF%B8%8F-2-gastby%EC%97%90-google-analytics-plugin-%EC%84%A4%EC%B9%98-head%EC%97%90-%EC%9E%90%EB%8F%99%ED%83%9C%EA%B7%B8%EC%82%BD%EC%9E%85\">⌨️ 2. Gastby에 Google Analytics plugin 설치 (<head>에 자동태그삽입)</a></li>\n<li><a href=\"#%EF%B8%8F-3-google-analytics-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%88%98%EC%A7%91-%ED%99%95%EC%9D%B8\">⌨️ 3. Google Analytics 데이터 수집 확인</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">참고사이트</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 29, 2023","title":"[블로그] 구글 애널리틱스 연동 with Gastby - Google analytics(2)","categories":"블로그","author":"sb","emoji":"📘"},"fields":{"slug":"/3-blog-ga-2/"}},"site":{"siteMetadata":{"siteUrl":"https://sbbs.me","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/3-blog-ga-0/","nextSlug":"/2-bot-mattermost-4/","prevSlug":"/3-blog-ga-2/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}