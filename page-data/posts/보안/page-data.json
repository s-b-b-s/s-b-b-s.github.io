{"componentChunkName":"component---src-templates-category-template-js","path":"/posts/보안","result":{"pageContext":{"currentCategory":"보안","categories":["All","BOT","보안","AWS","블로그"],"edges":[{"node":{"id":"f8f08c61-69a2-50e5-9f39-cc0f4160e85c","excerpt":"👋 소개 SSH-CERT 접근을 중앙에서 관리해 보자🙌 🔵 SSH-KEY 보다 SSH-CERT를 사용해야하는 4가지  1 프로비저닝하거나 가 없음 2 인증서는 실제로 의 코드로 구현하기가 매우 간단함 3 수명이 짧고 자체 파괴적이므로 자동으로 됨 4 key는 사용자가 생성 및 관리를 하지만 cert는 를 할 수 있음 🔴 많은 기업들이 SSH-KEY를 사용하지 않는 이유 3가지  1  : 조직에서 인증서를 사용하도록 하는 데 충분한 추진력이 없음 (Facebook, Uber, Netflix, Lyft 등이 SSH 인증서를 채택했지만 좋은 PR은 아직 나오지 않음) 2  : 이 작업을 수행하려면 약간의 PKI 지식이 필요 3  : SSH 인증서는 생각보다 어렵지 않지만 먼저 일부 구성을 수행해야 함 🟡 순서  1 ssh-keygen으로 CA인증서 생성 2 sshd_config 설정 및 키파일 전송 3 ssh-keygen으로 sign받을 키페어 생성  4 CA인증서로 키페어 sign 5…","fields":{"slug":"/5-security-ssh-3/"},"frontmatter":{"categories":"보안","title":"[보안] SSH 접근 중앙관리 - SSH-Cert 관리 (3)","date":"June 06, 2023"}},"next":{"fields":{"slug":"/5-security-ssh-2/"}},"previous":{"fields":{"slug":"/2-bot-lotto-1/"}}},{"node":{"id":"913932ad-d047-50d6-91c9-e7e348cedeb0","excerpt":"👋 소개 SSH-KEY 접근을 중앙에서 관리해 보자🙌 1 sshd_config 설정 2 (client)api 요청 쉘스크립트 파일 3 (server)api 응답 서버 코드 4 ssh-key 중앙관리 플로우 ⌨️ 1. sshd_config 설정 /etc/ssh/sshd_conifg 설정 \n설정은 아래 config에서 2개만 수정하면 된다 ⌨️ 2. /usr/sbin/api_key 쉘 스크립트 파일 api를 호출하여 ssh-key를 받아온다  변수은 접근시도한 계정명을 가져올수 있다 ⌨️ 3. api 서버 코드 간단하게 ssh-key만 리턴하는 코드임 ⌨️ 4. ssh-key 중앙관리 플로우 사용자는 미리 ssh 중앙관리 서버에 ,,, 4가지를  정책으로 넣어두고 \nsource와 dest IP,접근하는 계정이 DB에 있으면 를 리턴해서 접근은 성공한다\nsource와 dest IP,접근하는 계정이 DB에 없으면 을 리턴해고 ssh-key접근을 실패한다\n아래 플로우로 SSH-KEY를 중앙관리를 …","fields":{"slug":"/5-security-ssh-2/"},"frontmatter":{"categories":"보안","title":"[보안] SSH 접근 중앙관리 - SSH-KEY 관리 (2)","date":"June 05, 2023"}},"next":{"fields":{"slug":"/5-security-ssh-1/"}},"previous":{"fields":{"slug":"/5-security-ssh-3/"}}},{"node":{"id":"14ecab48-f067-5833-832e-13cde7c7664b","excerpt":"👋 소개 SSH 접근을 중앙에서 관리해 보자🙌 1 pam 설정 2 (client)api 요청 쉘파일 설정 3 (server)api 응답 서버 코드 4 ssh 중앙관리 플로우 ⌨️ 1. pam 설정 pam(Pluggable Authentication Module)은 사용 권한을 제어하는 모듈이다 1번째 인자 은 sshd 세션을 열었을때 옵션이다  2번째 인자  - 해당 설정으로 진행 시 실패하면 인증을 거부한다  2번째 인자  - 해당 설정으로 진행 시 실패해도 인증은 성공한다  3번째 인자  는 내가 지정한 파일을 실행시키는 옵션이다  4번째 인자  는 내가 지정한 파일의 경로이다  /etc/pam.d/sshd 설정  ⌨️ 2. /etc/ssh.sh api 설정 exit code 은 정상 종료, exit code 은 에러 비정상종료  는 접근시도한 Remote 호스트 는 접근하려는 User 값을 받아올수있다  ⌨️ 3. api 서버 코드 api 1은 response code , api …","fields":{"slug":"/5-security-ssh-1/"},"frontmatter":{"categories":"보안","title":"[보안] SSH 접근 중앙관리 - pam 설정(1)","date":"June 04, 2023"}},"next":{"fields":{"slug":"/4-aws-3/"}},"previous":{"fields":{"slug":"/5-security-ssh-2/"}}}]}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}